/*! For license information please see main.d63dedee.chunk.js.LICENSE.txt */
(this["webpackJsonpwhats-app-clone"]=this["webpackJsonpwhats-app-clone"]||[]).push([[0],{158:function(e,t,a){e.exports=a(218)},217:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),i=a.n(o),s=a(31),c=a(7),l=a(12),u=a(255),p=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),d=a(144),m=a(261),g=a(61),h=a(262),f=a(284),E=a(264),b=a(288),v=a(285),y=a(265),x=a(88),O=a(26),S=a(8),w=a.n(S),C=a(16),R="";(R="https://amh-whatapp-clone.herokuapp.com")||(alert("NODE_ENV variable isn't defined check console log, IN URLS constants"),console.log("production"));var I="".concat(R,"/api/v1/users"),N="".concat(R,"/api/v1/rooms"),_="".concat(R,"/api/v1/messages"),T="".concat(R,"/api/v1/blocks"),k=a(17),j=a.n(k),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"update",force:!1};return function(){var a=Object(C.a)(w.a.mark((function a(n,r){var o,i,s,l,u,p,d,m,g;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("update"!==t.type){a.next=10;break}if((o=r().currentOpenRoom.currentOpenRoom||{}).userToShowOnRoom&&e.userId===o.userToShowOnRoom._id){a.next=4;break}return a.abrupt("return");case 4:n({type:"CURRENT_USER_DATA",payload:e}),i=r().currentChattingUserData,s=Object(c.a)(Object(c.a)({},i),e),localStorage.setItem("currentChattingUserData",JSON.stringify(s)),a.next=33;break;case 10:if("new"!==t.type){a.next=33;break}if(a.prev=11,(r().currentOpenRoom.currentOpenRoom||{userToShowOnRoom:{}}).userToShowOnRoom._id!==e.userId||t.force){a.next=15;break}return a.abrupt("return");case 15:if(e.userId){a.next=17;break}return a.abrupt("return");case 17:return l="Bearer ".concat(r().loginUser.user.token),u={headers:{authorization:l}},a.next=21,j.a.get("".concat(I,"/getUserData/").concat(e.userId),u);case 21:p=a.sent,d=p.data.data,m=d.onlineId?"online":"offline",g=Object(c.a)({status:m},d),n({type:"CURRENT_USER_DATA_RESET"}),n({type:"CURRENT_USER_DATA",payload:g}),localStorage.setItem("currentChattingUserData",JSON.stringify(g)),a.next=33;break;case 30:a.prev=30,a.t0=a.catch(11),n({type:"CURRENT_USER_DATA_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 33:case"end":return a.stop()}}),a,null,[[11,30]])})));return function(e,t){return a.apply(this,arguments)}}()},A=a(6),D=Object(d.a)({palette:{primary:x.a}}),M=function(e){var t=e.history,a=Object(n.useState)({email:"",password:""}),o=Object(l.a)(a,2),i=o[0],u=o[1],d=p(),x=Object(A.b)(),S=Object(A.c)((function(e){return e.loginUser})),R=S.loading,N=S.user,_=S.err,T=S.success;function k(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}var U=function(e){var t=e.target,a=t.name,n=t.value;u(Object(c.a)(Object(c.a)({},i),{},Object(s.a)({},a,n)))};return Object(n.useEffect)((function(){N&&N.token&&t.push("/home")}),[x,t,N,T]),r.a.createElement(r.a.Fragment,null,T?r.a.createElement(b.a,{open:T,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(k,{severity:"success"},"Logged in successfully")):"",R?r.a.createElement(b.a,{open:R,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(k,{severity:"info"},"Logging in")):"",_?r.a.createElement(b.a,{open:_&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(k,{severity:"error"},_)):"",r.a.createElement("div",{className:d.root},r.a.createElement(m.a,{maxWidth:"xs"},r.a.createElement(g.a,{className:d.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Login",r.a.createElement("div",{className:d.loginLogo},r.a.createElement("img",{src:"images/login/loginLogo.png",alt:"Login Logo"}))),r.a.createElement("form",{className:d.loginFrom,onSubmit:function(e){e.preventDefault(),x(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s,l,u;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"LOGIN_REQUEST"}),r={headers:{"Content-Type":"application/json"}},t.next=5,j.a.post("".concat(I,"/login"),e,r);case 5:o=t.sent,i=o.data,s=i.token,l=i.user,u=Object(c.a)(Object(c.a)({},l),{},{token:s}),a({type:"LOGIN_SUCCESS",payload:u}),localStorage.setItem("loggedInUser",JSON.stringify(u)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"LOGIN_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(i))}},r.a.createElement(h.a,{theme:D},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,name:"email",type:"email",id:"email",disabled:R,autoComplete:"current-email",onChange:U,value:i.email,className:d.emailInput,InputProps:{className:d.emailInput,classes:{notchedOutline:d.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Password",required:!0,name:"password",type:"password",id:"password",disabled:R,autoComplete:"current-password",onChange:U,value:i.password,inputProps:{minLength:8},className:d.passwordInput,InputProps:{className:d.passwordInput,classes:{notchedOutline:d.InputBorder}}})),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:d.loginBtn,style:{backgroundColor:"#019688"},fullWidth:!0,disabled:R,endIcon:R&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Login")),r.a.createElement(g.a,{className:d.notSignedUp},"Don't have email ?"," ",r.a.createElement(O.b,{className:d.signUpLink,to:"/signup"}," ","Signup")),r.a.createElement(g.a,{className:d.notSignedUp},r.a.createElement(O.b,{className:d.signUpLink,to:"/forgotPassword"},"Forgot password")," ","?"))))},P=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}},photoContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center"},photoInput:{display:"none"},inputLabel:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#eee",border:"2px solid #ddd",cursor:"pointer","&>div:hover":{opacity:"1"}},cameraIconContainer:{position:"relative",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",opacity:"0.5","&>*":{width:"70%",height:"70%",position:"absolute"}},avatarContainer:{width:"100%",height:"100%",position:"relative","&:hover>span":{opacity:"1"},"& .MuiAvatar-root":{width:"100%",height:"100%"}},resetPhotoBtn:{opacity:"0",zIndex:"10",width:"100%",height:"100%",backgroundColor:"rgba(255,0,0,0.5)",borderRadius:"50%",position:"absolute",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"10px",top:"50%",left:"50%",transform:"translate(-50%,-50%)","&>*":{width:"90%",height:"90%"}},profileImage:{position:"absolute",zIndex:"1",width:"100%",height:"100%",borderRadius:"50%"}}})),L=a(266),B=a(290),F=a(267),z=a(268),W=Object(d.a)({palette:{primary:x.a}}),G=function(e){var t=e.history,a=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",passwordConfirm:"",photo:""}),o=Object(l.a)(a,2),i=o[0],u=o[1],p=P(),d=Object(A.b)(),x=Object(n.useState)(!1),S=Object(l.a)(x,2),N=S[0],_=S[1],T=Object(A.c)((function(e){return e.loginUser})),k=T.loading,U=T.user,D=T.err,M=T.success;function G(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}var H=function(){var e=Object(C.a)(w.a.mark((function e(t){var a,n,r,o,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),t.target.value){e.next=4;break}return e.abrupt("return");case 4:return u(Object(c.a)(Object(c.a)({},i),{},{photo:""})),a=t.target.files[0],(n=new FormData).append("photo",a),_(!0),e.prev=9,r={headers:{"Content-Type":"multipart/form-data"}},e.next=13,j.a.post("".concat(R,"/api/v1/upload"),n,r);case 13:o=e.sent,s=o.data,u(Object(c.a)(Object(c.a)({},i),{},{photo:s.path})),_(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(9),alert("ERROR UPLOADING YOUR IMAGE"),console.log(e.t0),_(!1);case 24:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){var t=e.target,a=t.name,n=t.value;u(Object(c.a)(Object(c.a)({},i),{},Object(s.a)({},a,n)))};return Object(n.useEffect)((function(){U&&U.token&&t.push("/")}),[d,t,U]),r.a.createElement(r.a.Fragment,null,M?r.a.createElement(b.a,{open:M,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(G,{severity:"success"},"Signed up successfully, Please check your inbox for verification email")):"",k?r.a.createElement(b.a,{open:k,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(G,{severity:"info"},"Signing up")):"",D?r.a.createElement(b.a,{open:D&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(G,{severity:"error"},D)):"",r.a.createElement("div",{className:p.root},r.a.createElement(m.a,{maxWidth:"xs"},r.a.createElement(g.a,{className:p.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Signup",r.a.createElement("div",{className:p.loginLogo},r.a.createElement("img",{src:"images/login/loginLogo.png",alt:"Login Logo"}))),r.a.createElement("form",{className:p.loginFrom,onSubmit:function(e){e.preventDefault(),d(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SIGNUP_REQUEST"}),r={headers:{"Content-Type":"application/json"}},t.next=5,j.a.post("".concat(I,"/signup"),e,r);case 5:o=t.sent,i=o.data.data,s=i,l=Object(c.a)({},s),a({type:"SIGNUP_SUCCESS",payload:l}),localStorage.setItem("loggedInUser",JSON.stringify(l)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"SIGNUP_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(i))}},r.a.createElement(h.a,{theme:W},r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0,sm:9,xs:9},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Name",required:!0,name:"firstName",type:"text",id:"firstName",disabled:k,autoComplete:"first-name",onChange:Y,value:i.firstName,className:p.emailInput,InputProps:{className:p.emailInput,classes:{notchedOutline:p.InputBorder}}})),r.a.createElement(L.a,{item:!0,sm:3,xs:3,className:p.photoContainer},r.a.createElement("input",{type:"file",id:"profile-photo",label:"Choose your image",onChange:H,accept:"image/*",className:p.photoInput}),r.a.createElement("label",{htmlFor:"profile-photo",className:p.inputLabel},r.a.createElement("div",{style:i.photo?{display:"none"}:{},className:p.cameraIconContainer},r.a.createElement(F.a,{style:N?{display:"none"}:{}}),r.a.createElement(y.a,{style:N?{}:{display:"none"},className:p.photoUploading,color:"secondary"})),r.a.createElement("div",{style:i.photo?{}:{display:"none"},className:p.avatarContainer},r.a.createElement("span",{onClick:function(e){u(Object(c.a)(Object(c.a)({},i),{},{photo:""})),e.preventDefault(),e.stopPropagation()},className:p.resetPhotoBtn},r.a.createElement(z.a,null)),r.a.createElement(B.a,{src:i.photo,alt:"user profile",className:p.profileImage}))))),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,disabled:k,name:"email",type:"email",id:"email",autoComplete:"current-email",onChange:Y,value:i.email,className:p.emailInput,InputProps:{className:p.emailInput,classes:{notchedOutline:p.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Password",required:!0,name:"password",disabled:k,type:"password",id:"password",autoComplete:"current-password",onChange:Y,value:i.password,inputProps:{minLength:8},className:p.passwordInput,InputProps:{className:p.passwordInput,classes:{notchedOutline:p.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Password Confirmation",required:!0,name:"passwordConfirm",disabled:k,type:"password",id:"passwordConfirm",autoComplete:"current-passwordConfirm",onChange:Y,value:i.passwordConfirm,inputProps:{minLength:8},className:p.passwordInput,InputProps:{className:p.passwordInput,classes:{notchedOutline:p.InputBorder}}})),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:p.loginBtn,fullWidth:!0,disabled:k,endIcon:k&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Signup")),r.a.createElement(g.a,{className:p.notSignedUp},"Have an account ?"," ",r.a.createElement(O.b,{className:p.signUpLink,to:"/login"}," ","Login")))))},H=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center",fontSize:"30px"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),Y=Object(d.a)({palette:{primary:x.a}}),Q=function(e){var t=e.history,a=Object(n.useState)(""),o=Object(l.a)(a,2),i=o[0],s=o[1],c=H(),u=Object(A.b)(),p=Object(A.c)((function(e){return e.loginUser})).user,d=Object(A.c)((function(e){return e.userForgotPassword})),x=d.loading,O=d.success,S=d.err;function R(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}return Object(n.useEffect)((function(){p&&p.token&&t.push("/")}),[u,t,p]),r.a.createElement(r.a.Fragment,null,O?r.a.createElement(b.a,{open:O,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(R,{severity:"success"},"Please check you email for resetting password link ",r.a.createElement("br",null),"You can close this window now")):"",x?r.a.createElement(b.a,{open:x,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(R,{severity:"info"},"Sending your request")):"",S?r.a.createElement(b.a,{open:S&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(R,{severity:"error"},S)):"",r.a.createElement("div",{className:c.root},r.a.createElement(m.a,{maxWidth:"xs"},r.a.createElement(g.a,{className:c.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Enter your email"),r.a.createElement("form",{className:c.loginFrom,onSubmit:function(e){e.preventDefault(),u(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"FORGOT_PASSWORD_REQUEST"}),r={headers:{"Content-Type":"application/json"}},t.next=5,j.a.post("".concat(I,"/forgotPassword"),{email:e},r);case 5:a({type:"FORGOT_PASSWORD_SUCCESS"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"FORGOT_PASSWORD_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()}(i))}},r.a.createElement(h.a,{theme:Y},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,name:"email",type:"email",id:"email",disabled:x,autoComplete:"current-email",onChange:function(e){return s(e.target.value)},value:i,className:c.emailInput,InputProps:{className:c.emailInput,classes:{notchedOutline:c.InputBorder}}})),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:c.loginBtn,fullWidth:!0,disabled:x,endIcon:x&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Send")))))},J=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center",fontSize:"30px"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),q=Object(d.a)({palette:{primary:x.a}}),V=function(e){var t=e.history,a=e.match.params.token,o=Object(n.useState)({email:"",password:"",passwordConfirm:""}),i=Object(l.a)(o,2),u=i[0],p=i[1],d=J(),x=Object(A.b)(),O=Object(A.c)((function(e){return e.loginUser})).user,S=Object(A.c)((function(e){return e.userResetPassword})),R=S.loading,N=S.success,_=S.err;function T(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}var k=function(e){var t=e.target,a=t.name,n=t.value;p(Object(c.a)(Object(c.a)({},u),{},Object(s.a)({},a,n)))};return Object(n.useEffect)((function(){O&&O.token&&t.push("/")}),[x,t,O]),Object(n.useEffect)((function(){N&&setTimeout((function(){t.push("/login")}),2e3)}),[t,N]),r.a.createElement(r.a.Fragment,null,N?r.a.createElement(b.a,{open:N,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(T,{severity:"success"},"Password updated successfully")):"",R?r.a.createElement(b.a,{open:R,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(T,{severity:"info"},"Sending Your Request")):"",_?r.a.createElement(b.a,{open:_&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(T,{severity:"error"},_)):"",r.a.createElement("div",{className:d.root},r.a.createElement(m.a,{maxWidth:"xs"},r.a.createElement(g.a,{className:d.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Reset your password password"),r.a.createElement("form",{className:d.loginFrom,onSubmit:function(e){e.preventDefault(),x(function(e,t){return function(){var a=Object(C.a)(w.a.mark((function a(n,r){var o;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"RESET_PASSWORD_REQUEST"}),o={headers:{"Content-Type":"application/json"}},a.next=5,j.a.post("".concat(I,"/resetPassword/").concat(e),t,o);case 5:n({type:"RESET_PASSWORD_SUCCESS"}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:"RESET_PASSWORD_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e,t){return a.apply(this,arguments)}}()}(a,u))}},r.a.createElement(h.a,{theme:q},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,name:"email",type:"email",id:"email",disabled:R,autoComplete:"current-email",onChange:k,value:u.email,className:d.emailInput,InputProps:{className:d.emailInput,classes:{notchedOutline:d.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"New Password",required:!0,name:"password",type:"password",id:"password",disabled:R,autoComplete:"current-password",onChange:k,value:u.password,inputProps:{minLength:8},className:d.passwordInput,InputProps:{className:d.passwordInput,classes:{notchedOutline:d.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"New Password Again",required:!0,name:"passwordConfirm",type:"password",id:"passwordConfirm",disabled:R,autoComplete:"current-password",onChange:k,value:u.passwordConfirm,inputProps:{minLength:8},className:d.passwordInput,InputProps:{className:d.passwordInput,classes:{notchedOutline:d.InputBorder}}})),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:d.loginBtn,fullWidth:!0,disabled:R,endIcon:R&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Send")))))},K=function(e){var t=e.history,a=e.match.params.token,o=Object(A.b)(),i=Object(A.c)((function(e){return e.loginUser})).user,s=Object(A.c)((function(e){return e.userVerifyEmail})),l=s.loading,u=void 0===l||l,p=s.success,d=s.err;function m(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}return Object(n.useEffect)((function(){var e,t;console.log({email:i.email,token:a}),i&&i.email&&a&&o((e=a,t=i.email,function(){var a=Object(C.a)(w.a.mark((function a(n){var r,o,i,s,l,u;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"VERIFY_USER_REQUEST"}),r={headers:{"Content-Type":"application/json"}},a.next=5,j.a.post("".concat(I,"/verifyEmail/").concat(e),{email:t},r);case 5:o=a.sent,i=o.data,s=i.token,l=i.user,u=Object(c.a)(Object(c.a)({},l),{},{token:s}),n({type:"VERIFY_USER_SUCCESS",payload:u}),localStorage.setItem("loggedInUser",JSON.stringify(u)),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),n({type:"VERIFY_USER_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}()))}),[o,a,i]),Object(n.useEffect)((function(){i&&i.token&&t.push("/")}),[o,t,i]),Object(n.useEffect)((function(){p&&setTimeout((function(){t.push("/login")}),2e3)}),[t,p]),r.a.createElement(r.a.Fragment,null,p?r.a.createElement(b.a,{open:p,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(m,{severity:"success"},"Email Verified Successfully")):"",u?r.a.createElement(b.a,{open:u,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(m,{severity:"info"},"Verifying your email")):"",d?r.a.createElement(b.a,{open:d&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(m,{severity:"error"},d)):"")},X=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",minWidth:"650px",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex"}}})),Z=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",overflow:"hidden",borderRight:"2px solid #E5E5E6",flex:"0.35",position:"relative"}}})),$=a(259),ee=a(145),te=a(273),ae=a(272),ne=a(86),re=a.n(ne),oe=Object(u.a)((function(e){return{root:{padding:"10px 0",width:"100%",height:"59px",display:"flex",alignItems:"center",position:"relative",justifyContent:"space-between",backgroundColor:"#EDEDED",zIndex:"10"},text:{fontWeight:"bold",color:"#009688"},addChat:{border:"1px solid #009688",color:"#009688"},sidebarIcons:{"& *":{color:"#696969"}},menuItem:{fontWeight:"bold","& a":{textDecoration:"none",color:"black"}}}})),ie=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh"},addChatDialogBtn:{color:"white",backgroundColor:"#009688",fontWeight:"bold","&:hover":{backgroundColor:"rgba(0, 148, 133, 0.66)"}}}})),se=a(289),ce=a(269),le=a(270),ue=a(271),pe=Object(u.a)((function(e){return{root:{margin:"0 auto",fontWeight:"bold"}}})),de=function(e){var t=e.severity,a=e.message,n=(e.children,pe());return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{className:n.root,severity:t||"info"},a))},me=function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s,c,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n().currentOpenRoom.currentOpenRoomId,o=n().currentOpenRoom.currentOpenRoom,e!==r||!o){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,i="Bearer ".concat(n().loginUser.user.token),s={headers:{"Content-Type":"application/json",authorization:i}},t.next=9,j.a.get("".concat(N,"/").concat(e),s);case 9:c=t.sent,l=c.data.data,a({type:"CURRENT_OPEN_ROOM_SUCCESS",payload:l}),localStorage.setItem("currentOpenRoomId",e),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),a({type:"CURRENT_OPEN_ROOM_REQUEST",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e,a){return t.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"UPDATE_ROOM_PUT_UP",payload:e})}catch(n){a({type:"GET_MY_ROOMS_FAIL",payload:n.response&&n.response.data.message?n.response.data.message:n.message})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},he=function(e,t){return function(){var a=Object(C.a)(w.a.mark((function a(n,r){var o,i,s,c;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"HANDLE_BLOCK_ROOM_REQUEST"}),o="Bearer ".concat(r().loginUser.user.token),i={headers:{"Content-Type":"application/json",authorization:o}},a.next=6,j.a.post("".concat(T),{room:e,otherUser:t},i);case 6:s=a.sent,c=s.data.data,n({type:"HANDLE_BLOCK_ROOM_SUCCESS",payload:c}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"HANDLE_BLOCK_ROOM_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()},fe=function(e,t){return function(){var a=Object(C.a)(w.a.mark((function a(n,r){var o,i,s,c;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"HANDLE_UNBLOCK_ROOM_REQUEST"}),o="Bearer ".concat(r().loginUser.user.token),i={headers:{"Content-Type":"application/json",authorization:o}},a.next=6,j.a.post("".concat(T,"/deleteBlock"),{room:e,otherUser:t},i);case 6:s=a.sent,c=s.data.data,n({type:"HANDLE_UNBLOCK_ROOM_SUCCESS",payload:c}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"HANDLE_UNBLOCK_ROOM_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()},Ee=function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=n().currentOpenRoom.currentOpenRoom)||r._id===e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,o="Bearer ".concat(n().loginUser.user.token),i={headers:{"Content-Type":"application/json",authorization:o}},t.next=8,j.a.get("".concat(N,"/").concat(e),i);case 8:s=t.sent,c=s.data.data,a({type:"UPDATE_CURRENT_OPEN_ROOM",payload:c}),localStorage.setItem("currentRoom",JSON.stringify(c)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),a({type:"HANDLE_ACCEPT_ROOM_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e,a){return t.apply(this,arguments)}}()},be=Object(d.a)({palette:{primary:x.a}}),ve=function(e){var t=e.open,a=e.setOpen,o=ie(),i=Object(A.b)(),s=Object(n.useState)(""),c=Object(l.a)(s,2),u=c[0],p=c[1],d=Object(A.c)((function(e){return e.createRoom})),m=d.loading,g=d.success,b=d.err,v=function(){a(!1),p("")};return Object(n.useEffect)((function(){g&&p("")}),[g]),Object(n.useEffect)((function(){g&&(i({type:"CREATE_ROOM_RESET"}),a(!1))}),[g,i,a]),r.a.createElement(se.a,{fullWidth:!0,maxWidth:"md",className:o.test,open:t,onClose:v,"aria-labelledby":"form-dialog-title"},m?r.a.createElement(de,{message:"Creating new chat ..."}):b?r.a.createElement(de,{severity:"error",message:b}):g?r.a.createElement(de,{severity:"success",message:"Room created successfully"}):r.a.createElement(ce.a,{id:"form-dialog-title"},"Enter Other Person Email"," "),r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),i((t="".concat(u).trim(),function(){var e=Object(C.a)(w.a.mark((function e(a,n){var r,o,i,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"CREATE_ROOM_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},e.next=6,j.a.post("".concat(N,"/createNewRoom"),{otherUserEmail:t},o);case 6:i=e.sent,s=i.data.data,a({type:"CREATE_ROOM_SUCCESS",payload:s}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:"CREATE_ROOM_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))}},r.a.createElement(le.a,null,r.a.createElement(h.a,{theme:be},r.a.createElement(f.a,{className:o.text,autoFocus:!0,margin:"dense",id:"email",label:"Email Address",type:"email",fullWidth:!0,onChange:function(e){return p(e.target.value)},value:u,disabled:m}))),r.a.createElement(ue.a,null,r.a.createElement(E.a,{className:o.addChatDialogBtn,onClick:v,variant:"contained"},"Cancel"),r.a.createElement(E.a,{className:o.addChatDialogBtn,disabled:u.length<1||m,variant:"contained",type:"submit",endIcon:m&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Add Chat"))))},ye=function(e){var t=e.setOpenUpdateMe,a=oe(),o=Object(A.b)(),i=Object(n.useState)(!1),s=Object(l.a)(i,2),c=s[0],u=s[1],p=Object(A.c)((function(e){return e.loginUser})).user,d=function(){o((function(e,t){e({type:"LOGOUT_USER"}),e({type:"CURRENT_OPEN_ROOM_RESET3"}),e({type:"CURRENT_USER_DATA_RESET"}),e({type:"GET_MY_ROOMS_RESET"}),e({type:"GET_ROOM_MESSAGES_RESET"}),localStorage.removeItem("loggedInUser"),localStorage.removeItem("currentRoom"),localStorage.removeItem("currentChattingUserData"),localStorage.removeItem("currentOpenRoomId"),t().socket.disconnect()}))},m=r.a.useState(null),g=Object(l.a)(m,2),h=g[0],f=g[1],E=Boolean(h),b=function(){f(null)};return r.a.createElement("div",{className:a.root},r.a.createElement($.a,{onClick:function(){return t(!0)}},r.a.createElement(B.a,{src:"".concat(p.photo)})),r.a.createElement("div",{className:a.sidebarIcons},r.a.createElement(ve,{open:c,setOpen:u}),r.a.createElement($.a,{onClick:function(){return u(!0)},className:a.addChat},r.a.createElement(ae.a,null)),r.a.createElement($.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){f(e.currentTarget)}},r.a.createElement(re.a,null)),r.a.createElement("div",null,r.a.createElement(ee.a,{id:"long-menu",anchorEl:h,keepMounted:!0,open:E,onClose:b,PaperProps:{style:{maxHeight:216,width:"20ch"}}},r.a.createElement(te.a,{onClick:function(){d(),b()},className:a.menuItem},"Logout"),r.a.createElement(te.a,{className:a.menuItem},r.a.createElement(O.b,{to:"/contactMe"}," About Me"))))))},xe=Object(u.a)((function(e){return{root:{height:"49px",width:"100%",backgroundColor:"#F6F6F6",padding:"10px",boxShadow:"0 1px 2px #ccc",borderBottom:"1px solid #bbb"},main:{background:"white",width:"100%",height:"100%",borderRadius:"20px",display:"flex",alignItems:"center",overflow:"hidden",padding:"2px 10px"},searchBox:{width:"100%",height:"100%",outline:"0",border:"none"},searchIcon:{color:"#919191",marginRight:"8px",fontSize:"20px"}}})),Oe=a(87),Se=a.n(Oe),we=function(){var e=xe();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.main},r.a.createElement(Se.a,{className:e.searchIcon}),r.a.createElement("input",{placeholder:"Search chats...",className:e.searchBox,type:"text"})))},Ce=Object(u.a)((function(e){return{root:{flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"}}}})),Re=Object(u.a)((function(e){return{btnBase:{padding:0,margin:0,width:"100%",height:"72px"},root:{width:"100%",height:"72px",display:"flex",alignItems:"center",cursor:"pointer",borderBottom:"1px solid #F5F5F5","&:hover":{background:"#F5F5F5"},overflow:"hidden"},avatarContainer:{padding:"0 10px"},info:{flex:1,padding:"15px 10px",display:"flex",flexDirection:"column"},infoTop:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"7px",width:"100%"},name:{flex:"0.60",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"100%",fontWeight:"bold",fontFamily:"Noto Sans JP, sans-serif",textAlign:"left",height:"100%"},date:{flex:"0.40",fontSize:"12px",color:"#878787",fontWeight:"bold",height:"100%"},lastMsg:{width:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Noto Sans JP, sans-serif",color:"#626262",fontSize:"90%",textAlign:"left"},newChat:{color:"#009688",display:"flex",alignItems:"center"},newChatIcon:{fontSize:"18px",color:"#FF5232"}}})),Ie=a(101),Ne=a(48),_e=a.n(Ne),Te=a(134),ke=a.n(Te),je=function(e){var t=e.room,a=Re(),n=Object(A.b)();return r.a.createElement(Ie.a,{disabled:!t.userToShowOnRoom&&!0,onClick:function(){var e={userId:t.userToShowOnRoom._id};n(U(e,{type:"new"})),n(me(t._id));var a=document.getElementById("new-message-input");a&&a.focus()},className:a.btnBase},r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.avatarContainer},r.a.createElement(B.a,{src:t.userToShowOnRoom?t.userToShowOnRoom.photo:"red"})),r.a.createElement("div",{className:a.info},r.a.createElement("div",{className:a.infoTop},r.a.createElement("div",{className:a.name},"".concat(t.userToShowOnRoom?t.userToShowOnRoom.fullName:"Deleted User")),r.a.createElement("div",{className:a.date},_e()(t.lastMessage.createdAt).format("hh:mm A"))),r.a.createElement("div",{className:a.lastMsg},t.new?r.a.createElement("span",{className:a.newChat},r.a.createElement(ke.a,{className:a.newChatIcon})," New"):r.a.createElement("span",null,t.lastMessage.messageTXT)))))},Ue=function(){var e=Ce(),t=Object(A.b)(),a=Object(A.c)((function(e){return e.myRooms})),o=a.loading,i=void 0===o||o,s=a.rooms,c=a.err;return Object(n.useEffect)((function(){t(function(){var e=Object(C.a)(w.a.mark((function e(t,a){var n,r,o,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GET_MY_ROOMS_REQUEST"}),n="Bearer ".concat(a().loginUser.user.token),r={headers:{authorization:n}},e.next=6,j.a.get("".concat(N,"/getMyRooms"),r);case 6:o=e.sent,i=o.data.data,t({type:"GET_MY_ROOMS_SUCCESS",payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:"GET_MY_ROOMS_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.root},i?r.a.createElement(de,{message:"Loading Chats ..."}):c?r.a.createElement(de,{severity:"error",message:c}):s.length<1?r.a.createElement(de,{message:"You don't have chats yet \ud83d\ude0a"}):s.map((function(e){return r.a.createElement(je,{key:e._id,room:e})}))))},Ae=Object(u.a)((function(e){return{root:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"20",overflow:"auto",backgroundColor:"#EDEDED","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"}},closed:{left:"-100%"},header:{padding:"10px",paddingBottom:"20px",width:"100%",height:"108px",display:"flex",alignItems:"flex-end",justifyContent:"space-between",position:"relative",backgroundColor:"#00BFA5",zIndex:"10",color:"white",fontSize:"19px"},saveChangesContainer:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},saveChanges:{position:"relative",color:"black","& *":{fontSize:"30px"}},savingUpdatingChanges:{position:"absolute"},profilePhotoContainer:{width:"100%",backgroundColor:"#EDEDED",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},photoContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center"},photoInput:{display:"none"},inputLabel:{width:"200px",height:"200px",borderRadius:"50%",backgroundColor:"#eee",border:"2px solid #ddd",cursor:"pointer","&>div:hover":{opacity:"1"}},cameraIconContainer:{position:"relative",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",opacity:"0.5","&>*":{width:"70%",height:"70%",position:"absolute"}},avatarContainer:{width:"100%",height:"100%",position:"relative","&:hover>.controllersContainer":{opacity:"1"},"& .MuiAvatar-root":{width:"100%",height:"100%"}},controllersContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"absolute",zIndex:"10",overflow:"hidden",borderRadius:"50%",opacity:"0"},resetPhotoBtn:{opacity:"0.3",width:"100%",height:"50%",backgroundColor:"rgba(255,0,0,0.5)",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"10px","&:hover":{opacity:"1"},"&>*":{width:"90%",height:"90%"}},uploadNewPhoto:{opacity:"0.3",width:"100%",height:"50%",backgroundColor:"rgba(0,0,255,0.5)",color:"white",display:"flex",justifyContent:"center",cursor:"pointer",alignItems:"center",fontSize:"10px","&:hover":{opacity:"1"},"&>*":{width:"90%",height:"90%"}},profileImage:{position:"absolute",zIndex:"1",width:"100%",height:"100%",borderRadius:"50%"},nameContainer:{width:"100%",backgroundColor:"#ffffff",padding:"10px 15px",paddingBottom:"20px",boxShadow:"0 1px 3px #ccc, 0 -1px 3px #ccc "},yourNameTXT:{color:"#009688"},firstName:{padding:"0 5px"},InputBorder:{colorSecondary:"#019688"},firstNameInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},aboutContainer:{width:"100%",backgroundColor:"#ffffff",padding:"10px 15px",marginTop:"10px",paddingBottom:"20px",boxShadow:"0 1px 3px #ccc, 0 -1px 3px #ccc "}}})),De=a(274),Me=a(275),Pe=a(276),Le=function(e){var t=e.open,a=e.setOpenUpdateMe,o=Ae(),i=Object(A.b)(),u=Object(d.a)({palette:{primary:x.a}}),p=Object(A.c)((function(e){return e.loginUser})).user,m=Object(A.c)((function(e){return e.updateMe})),g=m.loading,E=m.success,b=m.err,v=Object(n.useState)({firstName:"",about:"",photo:""}),O=Object(l.a)(v,2),S=O[0],N=O[1],_=Object(n.useState)(!1),T=Object(l.a)(_,2),k=T[0],U=T[1],D=Object(n.useState)(!1),M=Object(l.a)(D,2),P=M[0],L=M[1],W=function(e){var t=e.target,a=t.name,n=t.value;N(Object(c.a)(Object(c.a)({},S),{},Object(s.a)({},a,n)))},G=function(){var e=Object(C.a)(w.a.mark((function e(t){var a,n,r,o,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),t.target.value){e.next=4;break}return e.abrupt("return");case 4:return N(Object(c.a)(Object(c.a)({},S),{},{photo:""})),a=t.target.files[0],(n=new FormData).append("photo",a),U(!0),e.prev=9,r={headers:{"Content-Type":"multipart/form-data"}},e.next=13,j.a.post("".concat(R,"/api/v1/upload"),n,r);case 13:o=e.sent,i=o.data,N(Object(c.a)(Object(c.a)({},S),{},{photo:i.path})),U(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(9),alert("ERROR UPLOADING YOUR IMAGE"),console.log(e.t0),U(!1);case 24:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){N(p)}),[p]),Object(n.useEffect)((function(){S.firstName.trim()!==p.firstName.trim()||S.about.trim()!==p.about.trim()||S.photo!==p.photo?L(!0):L(!1)}),[S]),Object(n.useEffect)((function(){E&&(i({type:"UPDATE_USER_RESET"}),a(!1))}),[i,E]),r.a.createElement("div",{className:o.root+" "+(t?"":o.closed)},b&&r.a.createElement(de,{severity:"error",message:b}),r.a.createElement("div",{className:o.header},r.a.createElement("div",null,r.a.createElement($.a,{style:{color:"white"},onClick:function(){return a(!1)}},r.a.createElement(De.a,null))," ","Profile"),r.a.createElement("div",{className:o.saveChangesContainer},g&&r.a.createElement(y.a,{className:o.savingUpdatingChanges,color:"secondary"}),r.a.createElement($.a,{disabled:!P||g,title:"Save changes",className:o.saveChanges,onClick:function(){i(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"UPDATE_USER_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,j.a.patch("".concat(I,"/updateMe"),e,o);case 6:i=t.sent,s=i.data.data,a({type:"UPDATE_USER_SUCCESS",payload:s}),c=n().loginUser.user,localStorage.setItem("loggedInUser",JSON.stringify(c)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"UPDATE_USER_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(S))}},r.a.createElement(Me.a,null)))),r.a.createElement("div",{className:o.content},r.a.createElement("section",{className:o.profilePhotoContainer},r.a.createElement("input",{type:"file",id:"profile-photo",label:"Choose your image",onChange:G,accept:"image/*",className:o.photoInput}),r.a.createElement("label",{htmlFor:"profile-photo",className:o.inputLabel},r.a.createElement("div",{style:S.photo?{display:"none"}:{},className:o.cameraIconContainer},r.a.createElement(F.a,{style:k?{display:"none"}:{}}),r.a.createElement(y.a,{style:k?{}:{display:"none"},className:o.photoUploading,color:"secondary"})),r.a.createElement("div",{style:S.photo?{}:{display:"none"},className:o.avatarContainer},r.a.createElement("div",{className:o.controllersContainer+" controllersContainer"},r.a.createElement("label",{htmlFor:"profile-photo",title:"Upload new photo",className:o.uploadNewPhoto},r.a.createElement(Pe.a,null)),r.a.createElement("span",{title:"Remove this photo",onClick:function(e){N(Object(c.a)(Object(c.a)({},S),{},{photo:""})),e.preventDefault(),e.stopPropagation()},className:o.resetPhotoBtn},r.a.createElement(z.a,null))),r.a.createElement(B.a,{src:S.photo,alt:"user profile",className:o.profileImage})))),r.a.createElement("section",{className:o.nameContainer},r.a.createElement("header",{className:o.yourNameTXT},"Your Name"),r.a.createElement(h.a,{theme:u},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"standard",label:"Name",required:!0,name:"firstName",type:"text",id:"firstName",autoComplete:"first-name",onChange:W,value:S.firstName,className:o.firstName,InputProps:{className:o.firstNameInput,classes:{}}}))),r.a.createElement("section",{className:o.aboutContainer},r.a.createElement("header",{className:o.yourNameTXT},"About"),r.a.createElement(h.a,{theme:u},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"standard",label:"About",required:!0,name:"about",type:"text",id:"about",autoComplete:"about",onChange:W,value:S.about,className:o.firstName,InputProps:{className:o.firstNameInput,classes:{}}})))))},Be=function(){var e=Z(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0],i=a[1];return r.a.createElement("div",{className:e.root},r.a.createElement(ye,{setOpenUpdateMe:i}),r.a.createElement(we,null),r.a.createElement(Ue,null),r.a.createElement(Le,{setOpenUpdateMe:i,open:o}))},Fe=Object(u.a)((function(e){return{root:{background:"#F8F9FA",height:"100%",overflow:"hidden",flex:"0.65"}}})),ze=Object(u.a)((function(e){return{root:{width:"100%",height:"100%",backgroundColor:"#F8F9FA",borderBottom:"10px solid #4ADF83",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},mainLogo:{width:"250px",height:"250px"},mainText:{marginTop:"28px",fontSize:"32px",color:"#525252",fontWeight:"300",fontFamily:"Noto Sans JP, sans-serif",textAlign:"center",padding:"0 20px"},subTitle:{fontSize:"14px",color:"#888989",fontFamily:"Noto Sans JP, sans-serif",textAlign:"center",lineHeight:"20px",marginTop:"25px",padding:"0 50px"},contactMe:{marginTop:"20px",fontSize:"20px",color:"#525252",fontWeight:"300",fontFamily:"Noto Sans JP, sans-serif",textAlign:"center",padding:"0 20px","&>a":{color:"#009688",fontWeight:"bold"}}}})),We=function(){var e=ze();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{className:e.mainLogo,src:"/images/other/noChatImg.jpg",alt:"main logo"}),r.a.createElement("h1",{className:e.mainText},"Welcome to WhatsApp Clone"),r.a.createElement("div",{className:e.subTitle},"This is a testing WhatsApp version, not for profiting purposes. ",r.a.createElement("br",null)),r.a.createElement("h1",{className:e.contactMe},"Fully programmed by Amr Mohammed Hassan"," ",r.a.createElement(O.b,{to:"/contactMe"},"Contact Me")))},Ge=Object(u.a)((function(e){return{root:{display:"flex",height:"100%",flexDirection:"column",backgroundColor:"#E5DDD5",position:"relative"},bgObjects:{backgroundImage:'url("./images/other/chat_default_background.png")',backgroundSize:"contain",backgroundColor:"#E5DDD5",backgroundPosition:"fixed",position:"absolute",zIndex:"0",top:"0",left:"0",width:"100%",height:"100%",opacity:"0.1"},acceptChat:{width:"100%",textAlign:"center",padding:"10px 15px","&>button":{fontWeight:"bold"}}}})),He=a(277),Ye=Object(u.a)((function(e){return{root:{padding:"10px 0",width:"100%",height:"59px",display:"flex",alignItems:"center",position:"relative",justifyContent:"space-between",backgroundColor:"#EDEDED",boxShadow:"0 1px 2px #ccc",zIndex:"10"},sidebarIcons:{},userInfoBtnBase:{},userInfo:{display:"flex",alignItems:"center",padding:"10px"},avatarContainer:{marginRight:"10px"},info:{textAlign:"lef",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},name:{width:"100px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"100%",fontWeight:"bold",fontFamily:"Noto Sans JP, sans-serif",textAlign:"left"},status:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Noto Sans JP, sans-serif",color:"#626262",fontSize:"90%",textAlign:"left"}}})),Qe=function(e){var t=e.currentOpenRoom,a=e.setOpenUserInfo,o=Ye(),i=Object(A.b)(),s=Object(n.useState)(!1),c=Object(l.a)(s,2),u=c[0],p=c[1],d=Object(A.c)((function(e){return e.currentChattingUserData})),m=d.status,g=function(){p(!1)},h=function(){var e;i((e=t._id,function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"DELETE_ROOM_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,j.a.delete("".concat(N,"/").concat(e),o);case 6:i=t.sent,s=i.data.data,a({type:"DELETE_ROOM_SUCCESS",payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"DELETE_ROOM_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))},f=function(){i(he(t._id,t.userToShowOnRoom._id)),S()},b=r.a.useState(null),v=Object(l.a)(b,2),y=v[0],x=v[1],O=Boolean(y),S=function(){x(null)};return Object(n.useEffect)((function(){i(U({userId:d._id},{type:"new",force:!0}))}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.root},r.a.createElement(Ie.a,{onClick:function(){return a(!0)},className:o.userInfoBtnBase},r.a.createElement("div",{className:o.userInfo},r.a.createElement("div",{className:o.avatarContainer},r.a.createElement(B.a,{src:d.photo})),r.a.createElement("div",{className:o.info},r.a.createElement("div",{className:o.name},d.fullName),r.a.createElement("div",{className:o.status},m&&"startTyping"===m?"Typing ...":"online"===m?"Online":"offline"===m?function(){var e=new Date(d.lastSeenAt),t=_e()(d.lastSeenAt).format("hh:mm A"),a={day:e.getDate(),month:e.getMonth(),year:e.getFullYear()},n=new Date(Date.now()),r={day:n.getDate(),month:n.getMonth(),year:n.getFullYear()},o=(new Date(n-e)-new Date("1970-01-01"))/1e3/60/60/24;return"Last seen ".concat(function(e,t,a){if(e.day===t.day&&e.month===t.month&&e.year===t.year)return"Today";if((0===(n=e.day)?6:n-1)===t.day&&e.month===t.month&&e.year===t.year)return"Yesterday";if(o<=7&&o>0){console.log("in the last week");return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()]}return o<0?"The custom date is in the future":_e()(a).format("YYYY-MM-DD");var n}(r,a,e)," At ").concat(t)}():"stopTyping"===m?"Online":"")))),r.a.createElement("div",{className:o.sidebarIcons},r.a.createElement($.a,null,r.a.createElement(Se.a,null)),r.a.createElement($.a,{onClick:function(e){x(e.currentTarget)}},r.a.createElement(re.a,null)),r.a.createElement("div",null,r.a.createElement(ee.a,{id:"long-menu",anchorEl:y,keepMounted:!0,open:O,onClose:S,PaperProps:{style:{maxHeight:216,width:"20ch"}}},r.a.createElement(te.a,{onClick:function(){p(!0),S()},className:o.menuItem},"Delete Chat"),r.a.createElement(te.a,{onClick:t.myBlock?function(){i(fe(t._id,t.userToShowOnRoom._id)),S()}:f,className:o.menuItem},t.myBlock?"Unblock":"Block"))),r.a.createElement(se.a,{open:u,keepMounted:!0,onClose:g,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(ce.a,{id:"alert-dialog-slide-title"},"Delete Chat with"," ",t.userToShowOnRoom.firstName+" "+t.userToShowOnRoom.lastName),r.a.createElement(le.a,null,r.a.createElement(He.a,{id:"alert-dialog-slide-description"},"Are you sure you want to deleted this chat.",r.a.createElement("span",{style:t.myBlock?{display:"none"}:{}},r.a.createElement(E.a,{onClick:function(){f(),g()},variant:"text",color:"secondary"},"Block"),"Instead?"))),r.a.createElement(ue.a,null,r.a.createElement(E.a,{onClick:g,color:"primary"},"No"),r.a.createElement(E.a,{onClick:function(){h(),g()},color:"secondary"},"Yes"))))))},Je=Object(u.a)((function(e){return{root:{flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"},position:"relative",zIndex:10,scrollBehavior:"smooth"},earlierMessagesBtn:{position:"absolute",right:"10px",bottom:"70px",zIndex:"10",backgroundColor:"white",borderRadius:"50%",boxShadow:"0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2);"}}})),qe={root:{width:"100%",padding:"10px 8%",position:"relative","&>div":{maxWidth:"90%"}},otherMessage:{background:"white",padding:"6px 7px 8px 9px",display:"inline-block",borderRadius:"0 10px 10px 10px ",position:"relative",boxShadow:"0 1px .5px rgba(0, 0, 0,.13)"},otherMessageText:{padding:"15px 0",overflowWrap:" break-word"},otherMessageDate:{textAlign:"right",fontSize:"11px",color:"#8C8C8C"},myMessage:{background:"#DCF8C6",padding:"6px 7px 8px 9px",display:"inline-block",borderRadius:"10px 0 10px 10px ",position:"relative",boxShadow:"0 1px .5px rgba(0, 0, 0,.13)"},myMessageText:{padding:"15px 0",overflowWrap:" break-word"},myMessageDate:{textAlign:"right",fontSize:"11px",color:"#8C8C8C"},msgStatus:{paddingLeft:"5px","& > img":{width:"15px",height:"auto"}},adminMessage:{display:"inline-block",backgroundColor:"#E3F6FE",boxShadow:"0 1px .5px rgba(0, 0,0,.13)",padding:"10px 12px",borderRadius:"10px",textTransform:"uppercase",color:"#1D1E1F",fontSize:"12.5px",fontFamily:"'Roboto Condensed', sans-serif ",fontWeight:"bold",userSelect:"none"}},Ve=Object(u.a)((function(e){return qe})),Ke=function(e){var t=e.status;return r.a.createElement("span",null,"delivered"===t&&r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15"},r.a.createElement("path",{fill:"currentColor",d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})),"sent"===t&&r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15"},r.a.createElement("path",{fill:"currentColor",d:"M10.91 3.316l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})),"seen"===t&&r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15",color:"#4FC3F7"},r.a.createElement("path",{fill:"currentColor",d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})),"written"===t&&r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15"},r.a.createElement("path",{fill:"currentColor",d:"M9.75 7.713H8.244V5.359a.5.5 0 0 0-.5-.5H7.65a.5.5 0 0 0-.5.5v2.947a.5.5 0 0 0 .5.5h.094l.003-.001.003.002h2a.5.5 0 0 0 .5-.5v-.094a.5.5 0 0 0-.5-.5zm0-5.263h-3.5c-1.82 0-3.3 1.48-3.3 3.3v3.5c0 1.82 1.48 3.3 3.3 3.3h3.5c1.82 0 3.3-1.48 3.3-3.3v-3.5c0-1.82-1.48-3.3-3.3-3.3zm2 6.8a2 2 0 0 1-2 2h-3.5a2 2 0 0 1-2-2v-3.5a2 2 0 0 1 2-2h3.5a2 2 0 0 1 2 2v3.5z"})))},Xe=function(e){var t=e.message,a=e.sender,o=Ve(),i=Object(n.useState)(""),s=Object(l.a)(i,2),c=s[0],u=s[1];return Object(n.useEffect)((function(){u(t.createdAt)}),[t.createdAt]),r.a.createElement("div",{className:o.root,style:"other"===a?{textAlign:"left"}:"admin"===a?{textAlign:"center"}:{textAlign:"right"}},"other"===a&&r.a.createElement("div",{className:o.otherMessage+" otherMessage"},r.a.createElement("div",{className:o.otherMessageText},t.messageTXT),r.a.createElement("div",{className:o.otherMessageDate},_e()(c).format("hh:mm A"))),"me"===a&&r.a.createElement("div",{className:o.myMessage+" myMessage"},r.a.createElement("div",{className:o.myMessageText},t.messageTXT),r.a.createElement("div",{className:o.myMessageDate},_e()(c).format("hh:mm A"),r.a.createElement("span",{className:o.msgStatus},r.a.createElement(Ke,{status:t.status})))),"admin"===a&&r.a.createElement("div",{className:o.adminMessage+" adminMessage"},r.a.createElement("div",{className:o.adminMessageText},t.messageTXT)))},Ze=a(135),$e=a.n(Ze),et=Object(u.a)((function(e){return{root:{flex:1}}})),tt=function(e){var t=e.message,a=e.severity,n=e.children,o=et();return r.a.createElement("div",{className:o.root},r.a.createElement(de,{message:t,severity:a}),n)},at=Object(u.a)((function(e){return{root:{width:"100%",padding:"10px 8%",position:"relative","&>div":{maxWidth:"90%"}},otherMessage:{background:"white",padding:"12px 15px",display:"inline-block",borderRadius:"0 10px 10px 10px ",position:"relative",boxShadow:"0 1px .5px rgba(0, 0, 0,.13)"},otherMessageText:{overflowWrap:" break-word"},typingDot:{display:"inline-block",width:"10px",height:"10px",backgroundColor:"#ccc",marginRight:"5px",borderRadius:"50%",animation:"animateTypingDots 0.75s linear infinite","&:nth-child(1)":{animationDelay:"0"},"&:nth-child(2)":{animationDelay:"0.1s"},"&:nth-child(3)":{animationDelay:"0.2s",paddingRight:"0"}}}})),nt=function(){var e=at();return r.a.createElement("div",{className:e.root,style:{textAlign:"left"}},r.a.createElement("div",{className:e.otherMessage+" otherMessage"},r.a.createElement("div",{className:e.otherMessageText},r.a.createElement("span",{className:e.typingDot}),r.a.createElement("span",{className:e.typingDot}),r.a.createElement("span",{className:e.typingDot}))))},rt=function(e){var t=e.user,a=Je(),o=Object(A.c)((function(e){return e.roomMessages})),i=o.loading,s=void 0===i||i,c=o.messages,l=o.err,u=Object(A.c)((function(e){return e.currentChattingUserData})).status,p=function(){document.getElementById("messages-container").scrollTo(0,document.getElementById("messages-container").scrollHeight)};return Object(n.useEffect)((function(){var e=document.getElementById("messages-container");(0===e.scrollTop||e.scrollHeight-(e.scrollTop+e.clientHeight)<300)&&p(),(0===e.scrollTop||e.scrollHeight-(e.scrollTop+e.clientHeight)<300)&&"startTyping"===u&&p()}),[c,u]),Object(n.useEffect)((function(){var e=document.getElementById("messages-container"),t=document.getElementById("down-arrow");e.onscroll=function(){e.scrollHeight-(e.scrollTop+e.clientHeight)<300?t.style.display="none":t.style.display="inline-flex"}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"messages-container",className:a.root},r.a.createElement(Xe,{message:{messageTXT:"Messages are stored in secure server \ud83d\udd10"},sender:"admin"}),s?r.a.createElement(tt,{message:"Getting messages ..."}):l?r.a.createElement(tt,{severity:"error",message:l}):r.a.createElement(r.a.Fragment,null,c.map((function(e){return r.a.createElement(Xe,{key:e.clientId,message:e,sender:e.sender!==t._id&&e.sender?"admin"===e.sender?"admin":"other":"me"})})),u&&"startTyping"===u&&r.a.createElement(nt,null))),r.a.createElement("div",{className:a.earlierMessagesBtn},r.a.createElement($.a,{onClick:p,style:{width:"40px",height:"40px",display:"none"},id:"down-arrow"},r.a.createElement($e.a,{style:{fontSize:"25px"}}))))},ot=a(278),it=Object(u.a)((function(e){return{root:{width:"100%",minHeight:"62px",backgroundColor:"#F0F0F0",position:"relative",zIndex:"10",display:"flex",alignItems:"center"},msgBox:{flex:1,height:"100%",padding:"10px 20px",paddingRight:"0"},msgInput:{width:"100%",height:"100%",outline:"none",border:"none",padding:"10px 15px",borderRadius:"20px",fontSize:"15px",color:"#4A4A4A",fontFamily:"'Roboto', sans-serif",fontWeight:"bold",maxHeight:"200px",resize:"none",overflow:"hidden",userSelect:"none",backgroundColor:"white"},send:{color:"#9B9B9B"}}})),st=function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s,c,l,u,p;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n().currentOpenRoom.currentOpenRoomId,o=n().loginUser.user._id,i=e.sender,s=e.room,c=e._id,l=!i&&!c,u=i===o,p=i!==o,r===s&&a({type:"UPDATE_DISPLAYED_MESSAGES",payload:{message:e,addMyMessage:l,updateMyMessage:u,addOtherMessage:p}});case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},ct=a(287),lt=function(e){var t=e.currentOpenRoom,a=e.user,o=it(),i=Object(A.b)(),s=Object(n.useState)(""),c=Object(l.a)(s,2),u=c[0],p=c[1],d=Object(n.useState)(!1),m=Object(l.a)(d,2),g=m[0],h=m[1],f=Object(A.c)((function(e){return e.socket})),E=Object(A.c)((function(e){return e.currentChattingUserData})),b=E.status;return Object(n.useEffect)((function(){u.trim()?h(!0):h(!1)}),[u]),Object(n.useEffect)((function(){"online"!==b&&"startTyping"!==b&&"stopTyping"!==b||!f.id||(g?f.emit("user-currently-typing",{typingUserId:a._id,onlineUserId:E.onlineId,typingUserOnlineId:f.id}):f.emit("user-stopped-typing",{typingUserId:a._id,onlineUserId:E.onlineId,typingUserOnlineId:f.id}))}),[t,f,b,g,a,E.onlineId]),Object(n.useEffect)((function(){p(""),f.id&&f.emit("user-stopped-typing",{typingUserId:a._id,onlineUserId:E.onlineId,typingUserOnlineId:f.id})}),[E._id]),r.a.createElement("form",{autoComplete:"off",className:o.root,onSubmit:function(e){if(e.preventDefault(),u){var a={room:t._id,receiver:t.userToShowOnRoom._id,messageTXT:u,clientId:Object(ct.a)(),status:"written"};i(st(a)),i(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CREATE_MESSAGE_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,j.a.post("".concat(_,"/createMessage"),e,o);case 6:i=t.sent,s=i.data.data,a({type:"CREATE_MESSAGE_SUCCESS",payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"CREATE_MESSAGE_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(a)),h(!1),p("")}}},r.a.createElement("div",{className:o.msgBox},r.a.createElement("input",{id:"new-message-input",autoFocus:!0,placeholder:"Type a message",type:"text",className:o.msgInput,rows:"1",value:u,onChange:function(e){p(e.target.value)},autoComplete:!1})),r.a.createElement("div",{className:o.send},r.a.createElement($.a,{disabled:!u&&!0,type:"submit"},r.a.createElement(ot.a,{style:{color:"#9B9B9B"}}))))},ut=Object(u.a)((function(e){return{root:{width:"100%",height:"100px",position:"relative",zIndex:"10",textAlign:"center","&>button":{marginTop:"10px",fontWeight:"bold"}}}})),pt=function(e){var t=e.message,a=e.onAccept,n=e.onBlock,o=ut();return r.a.createElement("div",{className:o.root},r.a.createElement(de,{message:t}),r.a.createElement(E.a,{style:{marginRight:"10px"},variant:"outlined",margin:"normal",onClick:a},"Accept"),r.a.createElement(E.a,{variant:"outlined",margin:"normal",onClick:n},"Block"))},dt=Object(u.a)((function(e){return{root:{width:"100%",position:"relative",zIndex:"10",textAlign:"center","&>button":{marginTop:"10px",fontWeight:"bold"}}}})),mt=function(e){var t=e.severity,a=e.message,n=e.onUnBlock,o=dt();return r.a.createElement("div",{className:o.root},r.a.createElement(de,{severity:t,message:a}),n&&r.a.createElement(E.a,{style:{marginRight:"10px"},variant:"outlined",margin:"normal",onClick:n},"UnBlock"))},gt=Object(u.a)((function(e){return{root:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"20",overflow:"auto",backgroundColor:"#EDEDED","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"}},closed:{width:"0",height:"0"},header:{padding:"10px",paddingBottom:"20px",width:"100%",height:"108px",display:"flex",alignItems:"flex-end",justifyContent:"space-between",position:"relative",backgroundColor:"#00BFA5",zIndex:"10",color:"white",fontSize:"19px"},profilePhotoContainer:{width:"100%",backgroundColor:"#EDEDED",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},photoContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center"},avatarContainer:{width:"250px",height:"250px",position:"relative","&:hover>.controllersContainer":{opacity:"1"},"& .MuiAvatar-root":{width:"100%",height:"100%"}},profileImage:{position:"absolute",zIndex:"100",width:"100%",height:"100%",borderRadius:"50%"},infoHeader:{color:"#009688",fontSize:"20px",fontWeight:"bold",marginBottom:"10px"},userEmail:{textDecoration:"none",color:"#555"},infoContent:{color:"#333"},infoContainer:{width:"100%",backgroundColor:"#ffffff",padding:"10px 15px",marginTop:"10px",paddingBottom:"20px",boxShadow:"0 1px 3px #ccc, 0 -1px 3px #ccc "}}})),ht=function(e){var t=e.open,a=e.setOpenUserInfo,n=gt(),o=Object(A.c)((function(e){return e.currentChattingUserData})),i=o.photo,s=o.firstName,c=o.about,l=o.email;return r.a.createElement("div",{className:n.root+" "+(t?"":n.closed)},r.a.createElement("div",{className:n.header},r.a.createElement("div",null,r.a.createElement($.a,{style:{color:"white"},onClick:function(){return a(!1)}},r.a.createElement(De.a,null)),s),r.a.createElement("div",{className:n.saveChangesContainer})),r.a.createElement("div",{className:n.content},r.a.createElement("section",{className:n.profilePhotoContainer},r.a.createElement("div",{className:n.avatarContainer},r.a.createElement(B.a,{src:i,alt:"user profile",className:n.profileImage}))),r.a.createElement("section",{className:n.infoContainer},r.a.createElement("header",{className:n.infoHeader},"Name"),r.a.createElement("p",{className:n.infoContent},s)),r.a.createElement("section",{className:n.infoContainer},r.a.createElement("header",{className:n.infoHeader},"Email"),r.a.createElement("p",{className:n.infoContent},r.a.createElement("a",{className:n.userEmail,href:"mailto:".concat(l)},l))),r.a.createElement("section",{className:n.infoContainer},r.a.createElement("header",{className:n.infoHeader},"About"),r.a.createElement("p",{className:n.infoContent},c))))},ft=function(e){var t=e.currentOpenRoom,a=e.currentOpenRoomId,o=Ge(),i=Object(A.b)(),s=Object(n.useState)(!1),c=Object(l.a)(s,2),u=c[0],p=c[1],d=Object(A.c)((function(e){return e.loginUser})).user;Object(n.useEffect)((function(){var e;i((e=a,function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"GET_ROOM_MESSAGES_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{authorization:r}},t.next=6,j.a.get("".concat(_,"/getRoomMessages/").concat(e),o);case 6:i=t.sent,s=i.data.data,a({type:"GET_ROOM_MESSAGES_SUCCESS",payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"GET_ROOM_MESSAGES_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[a,i]);return r.a.createElement("div",{className:o.root},a&&r.a.createElement(Qe,{setOpenUserInfo:p,currentOpenRoom:t}),t.myBlock||t.otherUserBlock?null:a&&!t.accepted?t.otherUser===d._id?r.a.createElement(pt,{onAccept:function(){var e;i((e=a,function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,i,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"HANDLE_ACCEPT_ROOM_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,j.a.post("".concat(N,"/acceptRoom"),{room:e},o);case 6:i=t.sent,s=i.data.data,a({type:"HANDLE_ACCEPT_ROOM_SUCCESS",payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"HANDLE_ACCEPT_ROOM_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))},onBlock:function(){i(he(a,t.userToShowOnRoom._id))},message:"".concat(t.userToShowOnRoom.firstName," wants to chat you")}):r.a.createElement(tt,{message:"Wait until ".concat(t.userToShowOnRoom.firstName," accept your request")}):null,t.myBlock?r.a.createElement(mt,{message:"You blocked ".concat(t.userToShowOnRoom.fullName),onUnBlock:function(){i(fe(a,t.userToShowOnRoom._id))}}):t.otherUserBlock?r.a.createElement(mt,{message:"You are blocked from ".concat(t.userToShowOnRoom.fullName),severity:"error"}):null,t.accepted&&r.a.createElement(rt,{user:d}),a&&t.accepted&&!t.myBlock&&!t.otherUserBlock&&r.a.createElement(lt,{currentOpenRoom:t,user:d}),r.a.createElement(ht,{open:u,setOpenUserInfo:p}),r.a.createElement("div",{className:o.bgObjects}))},Et=function(){var e=Object(A.b)(),t=Object(A.c)((function(e){return e.currentOpenRoom})),a=t.currentOpenRoomId,o=t.currentOpenRoom,i=void 0===o?{}:o;Object(n.useEffect)((function(){a&&!i._id&&e(me(a))}),[i,a,e]);var s=Fe();return r.a.createElement("div",{className:s.root},a&&i._id?r.a.createElement(ft,{currentOpenRoomId:a,currentOpenRoom:i}):r.a.createElement(We,null))},bt=a(136),vt=a.n(bt),yt=function(e){var t=e.history,a=X(),o=Object(A.b)(),i=Object(A.c)((function(e){return e.loginUser})).user,s=Object(A.c)((function(e){return e.socket}));return Object(n.useEffect)((function(){i&&i.token?o((function(e,t){var a=t().loginUser.user;e({type:"CREATE_SOCKET",payload:vt.a.connect(R,{query:{id:a._id}})})})):t.replace("/login")}),[o,t,i]),Object(n.useEffect)((function(){s.on&&(s.on("server--user-send-message",(function(e){var t,a;o((t=e.room,function(){var e=Object(C.a)(w.a.mark((function e(a,n){var r,o,i,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},e.next=5,j.a.get("".concat(N,"/").concat(t),o);case 5:i=e.sent,s=i.data.data,a({type:"UPDATE_ROOM_PUT_UP",payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"HANDLE_ACCEPT_ROOM_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}())),o(st(e)),o((a=e,function(e,t){var n=t().currentChattingUserData,r=t().socket,o=t().currentOpenRoom.currentOpenRoomId,i=t().loginUser.user._id,s=a.sender,c=a.room,l=s!==i,u=n.status;l&&c===o&&u.match(/online|startTyping|stopTyping/)&&r.emit("user-read-message",{message:a,senderOnlineId:n.onlineId})}))})),s.on("server--user-added-new-room",(function(e){o(ge(e)),o({type:"CREATE_ROOM_RESET"})})),s.on("server--user-accept-new-room",(function(e){o(ge(e)),o(Ee(e._id))})),s.on("server--user-delete-chat",(function(e){o(function(e){return function(t,a){(a().currentOpenRoom&&a().currentOpenRoom.currentOpenRoom._id)===e&&(localStorage.removeItem("currentRoom"),t({type:"CURRENT_OPEN_ROOM_RESET3",payload:e})),t({type:"UPDATE_ROOMS_AFTER_DELETING",payload:e})}}(e))})),s.on("server--user-block-room",(function(e){o(Ee(e.room))})),s.on("server--user-unblock-room",(function(e){o(Ee(e.room))})),s.on("server--user-online",(function(e){var t=e.userId,a=e.onlineId;o(U({status:"online",userId:t,onlineId:a}))})),s.on("server--user-offline",(function(e){var t=e.userId,a=e.lastSeenAt;o(U({status:"offline",userId:t,lastSeenAt:a}))})),s.on("server--user-currently-typing",(function(e){var t=e.userId,a=e.typingUserOnlineId;o(U({status:"startTyping",userId:t,typing:!0,typingUserOnlineId:a}))})),s.on("server--user-stopped-typing",(function(e){var t=e.userId,a=e.typingUserOnlineId;o(U({status:"stopTyping",userId:t,typing:!1,typingUserOnlineId:a}))})))}),[o,s]),i&&i.token?r.a.createElement("div",{className:a.root},r.a.createElement(Be,null),r.a.createElement(Et,null)):null},xt=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",flexDirection:"column",overflow:"auto","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"}},header:{width:"100%",height:"200px",backgroundColor:"#EDEDED",boxShadow:"0 1px 3px #ccc, 0 -1px 3px #ccc ",display:"flex",alignItems:"center",padding:"10px"},myPic:{width:"180px",height:"180px"},myName:{fontSize:"30px",marginLeft:"20px"},myEmail:{marginTop:"15px",textAlign:"left",marginLeft:"20px",fontSize:"20px","& a":{textDecoration:"none",color:"#009688"}},contentContainer:{width:"100%",paddingTop:"20px","& a":{marginRight:"10px",cursor:"pointer"},"& section":{marginBottom:"20px",padding:"10px 0"},"& section:nth-child(even)":{backgroundColor:"#EDEDED",boxShadow:"0 1px 3px #ccc, 0 -1px 3px #ccc "}},facebook:{fontSize:"50px",color:"#314E8D"},twitter:{fontSize:"50px",color:"#1CA0F1"},gmail:{fontSize:"50px",color:"#F24436"},phoneContainer:{display:"flex",alignItems:"center",justifyContent:"center"},whatsApp:{fontSize:"50px",color:"#0CC042",marginRight:"10px"},phoneNo:{display:"inline-block",backgroundColor:"white",padding:"10px 8px",borderRadius:"10px",boxShadow:"0px 0px 3px  #ccc inset,1px 1px 3px  #ccc inset",cursor:"pointer",fontSize:"18px"},feedbackForm:{width:"350px",margin:"auto"},userFeedBack:{padding:"10px 15px",border:"none",resize:"none",minHeight:"100px",maxHeight:"120px",width:"350px",boxShadow:"0px 0px 3px  #ccc inset,1px 1px 3px  #ccc inset",borderRadius:"10px",transition:"0 all",outline:"none",lineHeight:"1.5","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"},"&:focus":{backgroundColor:"#eee"}},sendUserFeedBackBtn:{backgroundColor:"#049588",color:"white","&:hover":{backgroundColor:"#049560"}}}})),Ot=a(137),St=a.n(Ot),wt=a(138),Ct=a.n(wt),Rt=a(139),It=a.n(Rt),Nt=a(140),_t=a.n(Nt),Tt=function(){var e=xt(),t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],i=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.root},r.a.createElement("header",{className:e.header},r.a.createElement(O.b,{to:"/",style:{width:"20px",height:"20px",marginRight:"20px"}},r.a.createElement(De.a,null)),r.a.createElement(B.a,{src:"/images/other/mine.jpg",className:e.myPic}),r.a.createElement("div",{className:e.info},r.a.createElement("div",{className:e.myName},"Amr Mohammed Hassan"),r.a.createElement("div",{className:e.myEmail},r.a.createElement("a",{title:"Send Gmail Email",href:"mailto:amrmhassanmarsafa@gmail.com"},"Send Email")))),r.a.createElement("div",{className:e.contentContainer},r.a.createElement("section",null,r.a.createElement("a",{href:"http://facebook.com/amr"},r.a.createElement($.a,{title:"Face Book"},r.a.createElement(St.a,{className:e.facebook}))),r.a.createElement("a",null,r.a.createElement($.a,{title:"Twitter Account"},r.a.createElement(Ct.a,{className:e.twitter}))),r.a.createElement("a",null,r.a.createElement($.a,{title:"Gmail"},r.a.createElement(It.a,{className:e.gmail})))),r.a.createElement("section",{title:"WhatsApp Number",className:e.phoneContainer},r.a.createElement(_t.a,{title:"WhatsApp Number",className:e.whatsApp}),r.a.createElement("div",{title:"WhatsApp Number",className:e.phoneNo},"+20 1147497502")),r.a.createElement("section",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i("")},className:e.feedbackForm},r.a.createElement("textarea",{className:e.userFeedBack,placeholder:"You can leave a me a message here ...",onChange:function(e){return i(e.target.value)},value:o}),r.a.createElement(E.a,{fullWidth:!0,variant:"contained",className:e.sendUserFeedBackBtn,disabled:o.trim().length<5&&!0,type:"submit"},"Send"))))))},kt=a(282),jt=a(220),Ut=a(263),At=a(283),Dt=a(280),Mt=a(281),Pt=a(141),Lt=a.n(Pt),Bt=a(279),Ft=Object(u.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),zt=r.a.forwardRef((function(e,t){return r.a.createElement(Bt.a,Object.assign({direction:"up",ref:t},e))}));function Wt(){var e=Ft(),t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],i=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:function(){o(!0)}},"Open full-screen dialog"),r.a.createElement(se.a,{fullScreen:!0,open:n,onClose:i,TransitionComponent:zt},r.a.createElement(Dt.a,{className:e.appBar},r.a.createElement(Mt.a,null,r.a.createElement($.a,{edge:"start",color:"inherit",onClick:i,"aria-label":"close"},r.a.createElement(Lt.a,null)),r.a.createElement(g.a,{variant:"h6",className:e.title},"Sound"),r.a.createElement(E.a,{autoFocus:!0,color:"inherit",onClick:i},"save"))),r.a.createElement(Ut.a,null,r.a.createElement(jt.a,{button:!0},r.a.createElement(kt.a,{primary:"Phone ringtone",secondary:"Titania"})),r.a.createElement(At.a,null),r.a.createElement(jt.a,{button:!0},r.a.createElement(kt.a,{primary:"Default notification ringtone",secondary:"Tethys"})))))}var Gt=a(20),Ht=function(){return r.a.createElement(O.a,null,r.a.createElement(Gt.a,{path:"/login",component:M}),r.a.createElement(Gt.a,{path:"/signup",component:G}),r.a.createElement(Gt.a,{path:"/home",component:yt}),r.a.createElement(Gt.a,{path:"/contactMe",component:Tt}),r.a.createElement(Gt.a,{path:"/forgotPassword",component:Q}),r.a.createElement(Gt.a,{path:"/resetPassword/:token",component:V}),r.a.createElement(Gt.a,{path:"/verifyEmail/:token",component:K}),r.a.createElement(Gt.a,{path:"/test",component:Wt}),r.a.createElement(Gt.a,{path:"/",component:yt,exact:!0}))},Yt=a(53),Qt=a(142),Jt=a(143),qt=a(69),Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clientId",n=e.find((function(e){return e[a]===t[a]})),r=e.indexOf(n);return e.splice(r,1,t),e},Kt=Object(Yt.combineReducers)({loginUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return{loading:!0};case"LOGIN_SUCCESS":return{loading:!1,user:t.payload,success:!0};case"LOGIN_FAIL":return{loading:!1,err:t.payload};case"SIGNUP_REQUEST":return{loading:!0};case"SIGNUP_SUCCESS":return{loading:!1,user:t.payload,success:!0};case"SIGNUP_FAIL":return{loading:!1,err:t.payload};case"LOGOUT_USER":return{};case"UPDATE_USER_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{user:Object(c.a)(Object(c.a)({},e.user),t.payload)});case"VERIFY_USER_SUCCESS":return{loading:!1,user:t.payload,success:!0};default:return e}},myRooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rooms:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MY_ROOMS_REQUEST":return{loading:!0};case"GET_MY_ROOMS_SUCCESS":return{loading:!1,rooms:t.payload};case"GET_MY_ROOMS_FAIL":return{loading:!1,err:t.payload};case"UPDATE_ROOM_PUT_UP":var a=t.payload._id,n=Object(qt.a)(e.rooms).filter((function(e){return e._id!==a}));return n.unshift(t.payload),Object(c.a)(Object(c.a)({},e),{},{rooms:n});case"UPDATE_ROOMS_AFTER_DELETING":var r=t.payload,o=Object(qt.a)(e.rooms).filter((function(e){return e._id!==r}));return Object(c.a)(Object(c.a)({},e),{},{rooms:o});case"GET_MY_ROOMS_RESET":return{};default:return e}},createRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ROOM_REQUEST":return{loading:!0};case"CREATE_ROOM_SUCCESS":return{loading:!1,room:t.payload,success:!0};case"CREATE_ROOM_FAIL":return{loading:!1,err:t.payload};case"CREATE_ROOM_RESET":return{};default:return e}},currentOpenRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentOpenRoomId:"",currentOpenRoom:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_OPEN_ROOM_REQUEST":return{loading:!0};case"CURRENT_OPEN_ROOM_SUCCESS":return{currentOpenRoom:t.payload,loading:!1,success:!0,currentOpenRoomId:t.payload._id};case"CURRENT_OPEN_ROOM_REQUEST":return{loading:!1,err:t.payload};case"CURRENT_OPEN_ROOM_RESET3":return{};case"UPDATE_CURRENT_OPEN_ROOM":return Object(c.a)(Object(c.a)({},e),{},{currentOpenRoom:t.payload});case"TYPING_MESSAGE":return Object(c.a)(Object(c.a)({},e),{},{typing:t.payload});default:return e}},roomMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ROOM_MESSAGES_REQUEST":return{loading:!0};case"GET_ROOM_MESSAGES_SUCCESS":return{loading:!1,messages:t.payload};case"GET_ROOM_MESSAGES_FAIL":return{loading:!1,err:t.payload};case"UPDATE_DISPLAYED_MESSAGES":try{var a=t.payload,n=a.message,r=a.addMyMessage,o=a.updateMyMessage,i=a.addOtherMessage,s=Object(qt.a)(e.messages);if(r)s.push(n);else if(o){var l=Vt(s,n);s=l}else i?s.push(n):alert("Non expected state coming from message reducer check console");return Object(c.a)(Object(c.a)({},e),{},{messages:s})}catch(u){return e}case"GET_ROOM_MESSAGES_RESET":return{};default:return e}},createMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MESSAGE_REQUEST":return{loading:!0};case"CREATE_MESSAGE_SUCCESS":return{loading:!1,message:t.payload,success:!0};case"CREATE_MESSAGE_FAIL":return{loading:!1,err:t.payload};case"CREATE_MESSAGE_RESET":return{};default:return e}},socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_SOCKET":return t.payload;case"DISCONNECT_SOCKET":return{};default:return e}},userForgotPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT_PASSWORD_REQUEST":return{loading:!0};case"FORGOT_PASSWORD_SUCCESS":return{loading:!1,success:!0};case"FORGOT_PASSWORD_FAIL":return{loading:!1,err:t.payload};default:return e}},userResetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_PASSWORD_REQUEST":return{loading:!0};case"RESET_PASSWORD_SUCCESS":return{loading:!1,success:!0};case"RESET_PASSWORD_FAIL":return{loading:!1,err:t.payload};default:return e}},currentChattingUserData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_USER_DATA":return Object(c.a)(Object(c.a)({},e),t.payload);case"CURRENT_USER_DATA_RESET":return{};default:return e}},updateMe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER_REQUEST":return{loading:!0};case"UPDATE_USER_SUCCESS":return{loading:!1,success:!0};case"UPDATE_USER_FAIL":return{loading:!1,err:t.payload};case"UPDATE_USER_RESET":return{};default:return e}},userVerifyEmail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VERIFY_USER_REQUEST":return{loading:!0};case"VERIFY_USER_FAIL":return{loading:!1,err:t.payload};case"VERIFY_USER_RESET":return{};default:return e}}}),Xt=localStorage.getItem("loggedInUser")?JSON.parse(localStorage.getItem("loggedInUser")):{},Zt=localStorage.getItem("currentChattingUserData")?JSON.parse(localStorage.getItem("currentChattingUserData")):{},$t={loginUser:{user:Xt},currentOpenRoom:{currentOpenRoomId:localStorage.getItem("currentOpenRoomId")||"",currentOpenRoomData:{}},currentChattingUserData:Zt},ea=[Qt.a],ta=Object(Yt.createStore)(Kt,$t,Object(Jt.composeWithDevTools)(Yt.applyMiddleware.apply(void 0,ea)));a(217);i.a.render(r.a.createElement(A.a,{store:ta},r.a.createElement(Ht,null)),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.d63dedee.chunk.js.map