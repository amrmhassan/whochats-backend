/*! For license information please see main.b313b0cf.chunk.js.LICENSE.txt */
(this["webpackJsonpwhats-app-clone"]=this["webpackJsonpwhats-app-clone"]||[]).push([[0],{154:function(e,t,a){e.exports=a(214)},213:function(e,t,a){},214:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),s=a.n(o),i=a(30),c=a(7),l=a(15),u=a(250),p=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),d=a(140),m=a(256),g=a(58),h=a(257),f=a(279),E=a(259),b=a(283),v=a(280),y=a(260),O=a(86),x=a(39),S=a(8),w=a.n(S),C=a(16),R="";(R="https://amh-whatapp-clone.herokuapp.com")||(alert("NODE_ENV variable isn't defined check console log, IN URLS constants"),console.log("production"));var _="".concat(R,"/api/v1/users"),I="".concat(R,"/api/v1/rooms"),T="".concat(R,"/api/v1/messages"),N="".concat(R,"/api/v1/blocks"),j=a(17),k=a.n(j),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"update",force:!1};return function(){var a=Object(C.a)(w.a.mark((function a(n,r){var o,s,i,l,u,p,d,m,g;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("update"!==t.type){a.next=10;break}if((o=r().currentOpenRoom.currentOpenRoom||{}).userToShowOnRoom&&e.userId===o.userToShowOnRoom._id){a.next=4;break}return a.abrupt("return");case 4:n({type:"CURRENT_USER_DATA",payload:e}),s=r().currentChattingUserData,i=Object(c.a)(Object(c.a)({},s),e),localStorage.setItem("currentChattingUserData",JSON.stringify(i)),a.next=33;break;case 10:if("new"!==t.type){a.next=33;break}if(a.prev=11,(r().currentOpenRoom.currentOpenRoom||{userToShowOnRoom:{}}).userToShowOnRoom._id!==e.userId||t.force){a.next=15;break}return a.abrupt("return");case 15:if(e.userId){a.next=17;break}return a.abrupt("return");case 17:return l="Bearer ".concat(r().loginUser.user.token),u={headers:{authorization:l}},a.next=21,k.a.get("".concat(_,"/getUserData/").concat(e.userId),u);case 21:p=a.sent,d=p.data.data,m=d.onlineId?"online":"offline",g=Object(c.a)({status:m},d),n({type:"CURRENT_USER_DATA_RESET"}),n({type:"CURRENT_USER_DATA",payload:g}),localStorage.setItem("currentChattingUserData",JSON.stringify(g)),a.next=33;break;case 30:a.prev=30,a.t0=a.catch(11),n({type:"CURRENT_USER_DATA_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 33:case"end":return a.stop()}}),a,null,[[11,30]])})));return function(e,t){return a.apply(this,arguments)}}()},A=a(6),M=Object(d.a)({palette:{primary:O.a}}),D=function(e){var t=e.history,a=Object(n.useState)({email:"",password:""}),o=Object(l.a)(a,2),s=o[0],u=o[1],d=p(),O=Object(A.b)(),S=Object(A.c)((function(e){return e.loginUser})),R=S.loading,I=S.user,T=S.err,N=S.success;function j(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}var U=function(e){var t=e.target,a=t.name,n=t.value;u(Object(c.a)(Object(c.a)({},s),{},Object(i.a)({},a,n)))};return Object(n.useEffect)((function(){I&&I.token&&t.push("/home")}),[O,t,I,N]),r.a.createElement(r.a.Fragment,null,N?r.a.createElement(b.a,{open:N,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(j,{severity:"success"},"Logged in successfully")):"",R?r.a.createElement(b.a,{open:R,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(j,{severity:"info"},"Logging in")):"",T?r.a.createElement(b.a,{open:T&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(j,{severity:"error"},T)):"",r.a.createElement("div",{className:d.root},r.a.createElement(m.a,{maxWidth:"xs"},r.a.createElement(g.a,{className:d.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Login",r.a.createElement("div",{className:d.loginLogo},r.a.createElement("img",{src:"images/login/loginLogo.png",alt:"Login Logo"}))),r.a.createElement("form",{className:d.loginFrom,onSubmit:function(e){e.preventDefault(),O(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i,l,u;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"LOGIN_REQUEST"}),r={headers:{"Content-Type":"application/json"}},t.next=5,k.a.post("".concat(_,"/login"),e,r);case 5:o=t.sent,s=o.data,i=s.token,l=s.user,u=Object(c.a)(Object(c.a)({},l),{},{token:i}),a({type:"LOGIN_SUCCESS",payload:u}),localStorage.setItem("loggedInUser",JSON.stringify(u)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"LOGIN_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(s))}},r.a.createElement(h.a,{theme:M},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,name:"email",type:"email",id:"email",disabled:R,autoComplete:"current-email",onChange:U,value:s.email,className:d.emailInput,InputProps:{className:d.emailInput,classes:{notchedOutline:d.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Password",required:!0,name:"password",type:"password",id:"password",disabled:R,autoComplete:"current-password",onChange:U,value:s.password,inputProps:{minLength:8},className:d.passwordInput,InputProps:{className:d.passwordInput,classes:{notchedOutline:d.InputBorder}}})),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:d.loginBtn,style:{backgroundColor:"#019688"},fullWidth:!0,disabled:R,endIcon:R&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Login")),r.a.createElement(g.a,{className:d.notSignedUp},"Don't have email ?"," ",r.a.createElement(x.b,{className:d.signUpLink,to:"/signup"}," ","Signup")),r.a.createElement(g.a,{className:d.notSignedUp},r.a.createElement(x.b,{className:d.signUpLink,to:"/forgotPassword"},"Forgot password")," ","?"))))},P=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}},photoContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center"},photoInput:{display:"none"},inputLabel:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#eee",border:"2px solid #ddd",cursor:"pointer","&>div:hover":{opacity:"1"}},cameraIconContainer:{position:"relative",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",opacity:"0.5","&>*":{width:"70%",height:"70%",position:"absolute"}},avatarContainer:{width:"100%",height:"100%",position:"relative","&:hover>span":{opacity:"1"},"& .MuiAvatar-root":{width:"100%",height:"100%"}},resetPhotoBtn:{opacity:"0",zIndex:"10",width:"100%",height:"100%",backgroundColor:"rgba(255,0,0,0.5)",borderRadius:"50%",position:"absolute",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"10px",top:"50%",left:"50%",transform:"translate(-50%,-50%)","&>*":{width:"90%",height:"90%"}},profileImage:{position:"absolute",zIndex:"1",width:"100%",height:"100%",borderRadius:"50%"}}})),L=a(261),B=a(285),F=a(262),W=a(263),z=Object(d.a)({palette:{primary:O.a}}),G=function(e){var t=e.history,a=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",passwordConfirm:"",photo:""}),o=Object(l.a)(a,2),s=o[0],u=o[1],p=P(),d=Object(A.b)(),O=Object(n.useState)(!1),S=Object(l.a)(O,2),I=S[0],T=S[1],N=Object(A.c)((function(e){return e.loginUser})),j=N.loading,U=N.user,M=N.err,D=N.success;function G(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}var H=function(){var e=Object(C.a)(w.a.mark((function e(t){var a,n,r,o,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),t.target.value){e.next=4;break}return e.abrupt("return");case 4:return u(Object(c.a)(Object(c.a)({},s),{},{photo:""})),a=t.target.files[0],(n=new FormData).append("photo",a),T(!0),e.prev=9,r={headers:{"Content-Type":"multipart/form-data"}},e.next=13,k.a.post("".concat(R,"/api/v1/upload"),n,r);case 13:o=e.sent,i=o.data,u(Object(c.a)(Object(c.a)({},s),{},{photo:i.path})),T(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(9),alert("ERROR UPLOADING YOUR IMAGE"),console.log(e.t0),T(!1);case 24:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.target,a=t.name,n=t.value;u(Object(c.a)(Object(c.a)({},s),{},Object(i.a)({},a,n)))};return Object(n.useEffect)((function(){U&&U.token&&t.push("/")}),[d,t,U]),r.a.createElement(r.a.Fragment,null,D?r.a.createElement(b.a,{open:D,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(G,{severity:"success"},"Signed up successfully")):"",j?r.a.createElement(b.a,{open:j,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(G,{severity:"info"},"Signing up")):"",M?r.a.createElement(b.a,{open:M&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(G,{severity:"error"},M)):"",r.a.createElement("div",{className:p.root},r.a.createElement(m.a,{maxWidth:"xs"},r.a.createElement(g.a,{className:p.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Signup",r.a.createElement("div",{className:p.loginLogo},r.a.createElement("img",{src:"images/login/loginLogo.png",alt:"Login Logo"}))),r.a.createElement("form",{className:p.loginFrom,onSubmit:function(e){e.preventDefault(),d(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i,l,u;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SIGNUP_REQUEST"}),r={headers:{"Content-Type":"application/json"}},t.next=5,k.a.post("".concat(_,"/signup"),e,r);case 5:o=t.sent,s=o.data,i=s.token,l=s.user,u=Object(c.a)(Object(c.a)({},l),{},{token:i}),a({type:"SIGNUP_SUCCESS",payload:u}),localStorage.setItem("loggedInUser",JSON.stringify(u)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"SIGNUP_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(s))}},r.a.createElement(h.a,{theme:z},r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0,sm:9,xs:12},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Name",required:!0,name:"firstName",type:"text",id:"firstName",disabled:j,autoComplete:"first-name",onChange:Q,value:s.firstName,className:p.emailInput,InputProps:{className:p.emailInput,classes:{notchedOutline:p.InputBorder}}})),r.a.createElement(L.a,{item:!0,sm:3,xs:12,className:p.photoContainer},r.a.createElement("input",{type:"file",id:"profile-photo",label:"Choose your image",onChange:H,accept:"image/*",className:p.photoInput}),r.a.createElement("label",{htmlFor:"profile-photo",className:p.inputLabel},r.a.createElement("div",{style:s.photo?{display:"none"}:{},className:p.cameraIconContainer},r.a.createElement(F.a,{style:I?{display:"none"}:{}}),r.a.createElement(y.a,{style:I?{}:{display:"none"},className:p.photoUploading,color:"secondary"})),r.a.createElement("div",{style:s.photo?{}:{display:"none"},className:p.avatarContainer},r.a.createElement("span",{onClick:function(e){u(Object(c.a)(Object(c.a)({},s),{},{photo:""})),e.preventDefault(),e.stopPropagation()},className:p.resetPhotoBtn},r.a.createElement(W.a,null)),r.a.createElement(B.a,{src:s.photo,alt:"user profile",className:p.profileImage}))))),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,disabled:j,name:"email",type:"email",id:"email",autoComplete:"current-email",onChange:Q,value:s.email,className:p.emailInput,InputProps:{className:p.emailInput,classes:{notchedOutline:p.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Password",required:!0,name:"password",disabled:j,type:"password",id:"password",autoComplete:"current-password",onChange:Q,value:s.password,inputProps:{minLength:8},className:p.passwordInput,InputProps:{className:p.passwordInput,classes:{notchedOutline:p.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Password Confirmation",required:!0,name:"passwordConfirm",disabled:j,type:"password",id:"passwordConfirm",autoComplete:"current-passwordConfirm",onChange:Q,value:s.passwordConfirm,inputProps:{minLength:8},className:p.passwordInput,InputProps:{className:p.passwordInput,classes:{notchedOutline:p.InputBorder}}})),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:p.loginBtn,fullWidth:!0,disabled:j,endIcon:j&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Signup")),r.a.createElement(g.a,{className:p.notSignedUp},"Have an account ?"," ",r.a.createElement(x.b,{className:p.signUpLink,to:"/login"}," ","Login")))))},H=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center",fontSize:"30px"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),Q=Object(d.a)({palette:{primary:O.a}}),Y=function(e){var t=e.history,a=Object(n.useState)(""),o=Object(l.a)(a,2),s=o[0],i=o[1],c=H(),u=Object(A.b)(),p=Object(A.c)((function(e){return e.loginUser})).user,d=Object(A.c)((function(e){return e.userForgotPassword})),O=d.loading,x=d.success,S=d.err;function R(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}return Object(n.useEffect)((function(){p&&p.token&&t.push("/")}),[u,t,p]),r.a.createElement(r.a.Fragment,null,x?r.a.createElement(b.a,{open:x,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(R,{severity:"success"},"Please check you email for resetting password link ",r.a.createElement("br",null),"You can close this window now")):"",O?r.a.createElement(b.a,{open:O,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(R,{severity:"info"},"Sending your request")):"",S?r.a.createElement(b.a,{open:S&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(R,{severity:"error"},S)):"",r.a.createElement("div",{className:c.root},r.a.createElement(m.a,{maxWidth:"xs"},r.a.createElement(g.a,{className:c.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Enter your email"),r.a.createElement("form",{className:c.loginFrom,onSubmit:function(e){e.preventDefault(),u(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"FORGOT_PASSWORD_REQUEST"}),r={headers:{"Content-Type":"application/json"}},t.next=5,k.a.post("".concat(_,"/forgotPassword"),{email:e},r);case 5:a({type:"FORGOT_PASSWORD_SUCCESS"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"FORGOT_PASSWORD_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()}(s))}},r.a.createElement(h.a,{theme:Q},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,name:"email",type:"email",id:"email",disabled:O,autoComplete:"current-email",onChange:function(e){return i(e.target.value)},value:s,className:c.emailInput,InputProps:{className:c.emailInput,classes:{notchedOutline:c.InputBorder}}})),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:c.loginBtn,fullWidth:!0,disabled:O,endIcon:O&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Send")))))},J=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center",fontSize:"30px"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),q=Object(d.a)({palette:{primary:O.a}}),K=function(e){var t=e.history,a=e.match.params.token,o=Object(n.useState)({email:"",password:"",passwordConfirm:""}),s=Object(l.a)(o,2),u=s[0],p=s[1],d=J(),O=Object(A.b)(),x=Object(A.c)((function(e){return e.loginUser})).user,S=Object(A.c)((function(e){return e.userResetPassword})),R=S.loading,I=S.success,T=S.err;function N(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}var j=function(e){var t=e.target,a=t.name,n=t.value;p(Object(c.a)(Object(c.a)({},u),{},Object(i.a)({},a,n)))};return Object(n.useEffect)((function(){x&&x.token&&t.push("/")}),[O,t,x]),Object(n.useEffect)((function(){I&&setTimeout((function(){t.push("/login")}),2e3)}),[t,I]),r.a.createElement(r.a.Fragment,null,I?r.a.createElement(b.a,{open:I,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(N,{severity:"success"},"Password updated successfully")):"",R?r.a.createElement(b.a,{open:R,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(N,{severity:"info"},"Sending Your Request")):"",T?r.a.createElement(b.a,{open:T&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(N,{severity:"error"},T)):"",r.a.createElement("div",{className:d.root},r.a.createElement(m.a,{maxWidth:"xs"},r.a.createElement(g.a,{className:d.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Reset your password password"),r.a.createElement("form",{className:d.loginFrom,onSubmit:function(e){e.preventDefault(),O(function(e,t){return function(){var a=Object(C.a)(w.a.mark((function a(n,r){var o;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"RESET_PASSWORD_REQUEST"}),o={headers:{"Content-Type":"application/json"}},a.next=5,k.a.post("".concat(_,"/resetPassword/").concat(e),t,o);case 5:n({type:"RESET_PASSWORD_SUCCESS"}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:"RESET_PASSWORD_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e,t){return a.apply(this,arguments)}}()}(a,u))}},r.a.createElement(h.a,{theme:q},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,name:"email",type:"email",id:"email",disabled:R,autoComplete:"current-email",onChange:j,value:u.email,className:d.emailInput,InputProps:{className:d.emailInput,classes:{notchedOutline:d.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"New Password",required:!0,name:"password",type:"password",id:"password",disabled:R,autoComplete:"current-password",onChange:j,value:u.password,inputProps:{minLength:8},className:d.passwordInput,InputProps:{className:d.passwordInput,classes:{notchedOutline:d.InputBorder}}}),r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"New Password Again",required:!0,name:"passwordConfirm",type:"password",id:"passwordConfirm",disabled:R,autoComplete:"current-password",onChange:j,value:u.passwordConfirm,inputProps:{minLength:8},className:d.passwordInput,InputProps:{className:d.passwordInput,classes:{notchedOutline:d.InputBorder}}})),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:d.loginBtn,fullWidth:!0,disabled:R,endIcon:R&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Send")))))},X=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",minWidth:"650px",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex"}}})),V=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",overflow:"hidden",borderRight:"2px solid #E5E5E6",flex:"0.35",position:"relative"}}})),Z=a(254),$=a(141),ee=a(268),te=a(267),ae=a(134),ne=a.n(ae),re=a(84),oe=a.n(re),se=Object(u.a)((function(e){return{root:{padding:"10px 0",width:"100%",height:"59px",display:"flex",alignItems:"center",position:"relative",justifyContent:"space-between",backgroundColor:"#EDEDED",zIndex:"10"},text:{fontWeight:"bold",color:"#009688"},addChat:{border:"1px solid #009688",color:"#009688"},sidebarIcons:{"& *":{color:"#696969"}},menuItem:{fontWeight:"bold"}}})),ie=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh"},addChatDialogBtn:{color:"white",backgroundColor:"#009688",fontWeight:"bold","&:hover":{backgroundColor:"rgba(0, 148, 133, 0.66)"}}}})),ce=a(284),le=a(264),ue=a(265),pe=a(266),de=Object(u.a)((function(e){return{root:{margin:"0 auto",fontWeight:"bold"}}})),me=function(e){var t=e.severity,a=e.message,n=(e.children,de());return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{className:n.root,severity:t||"info"},a))},ge=function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i,c,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n().currentOpenRoom.currentOpenRoomId,o=n().currentOpenRoom.currentOpenRoom,e!==r||!o){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,s="Bearer ".concat(n().loginUser.user.token),i={headers:{"Content-Type":"application/json",authorization:s}},t.next=9,k.a.get("".concat(I,"/").concat(e),i);case 9:c=t.sent,l=c.data.data,a({type:"CURRENT_OPEN_ROOM_SUCCESS",payload:l}),localStorage.setItem("currentOpenRoomId",e),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),a({type:"CURRENT_OPEN_ROOM_REQUEST",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e,a){return t.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"UPDATE_ROOM_PUT_UP",payload:e})}catch(n){a({type:"GET_MY_ROOMS_FAIL",payload:n.response&&n.response.data.message?n.response.data.message:n.message})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fe=function(e,t){return function(){var a=Object(C.a)(w.a.mark((function a(n,r){var o,s,i,c;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"HANDLE_BLOCK_ROOM_REQUEST"}),o="Bearer ".concat(r().loginUser.user.token),s={headers:{"Content-Type":"application/json",authorization:o}},a.next=6,k.a.post("".concat(N),{room:e,otherUser:t},s);case 6:i=a.sent,c=i.data.data,n({type:"HANDLE_BLOCK_ROOM_SUCCESS",payload:c}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"HANDLE_BLOCK_ROOM_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()},Ee=function(e,t){return function(){var a=Object(C.a)(w.a.mark((function a(n,r){var o,s,i,c;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"HANDLE_UNBLOCK_ROOM_REQUEST"}),o="Bearer ".concat(r().loginUser.user.token),s={headers:{"Content-Type":"application/json",authorization:o}},a.next=6,k.a.post("".concat(N,"/deleteBlock"),{room:e,otherUser:t},s);case 6:i=a.sent,c=i.data.data,n({type:"HANDLE_UNBLOCK_ROOM_SUCCESS",payload:c}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"HANDLE_UNBLOCK_ROOM_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()},be=function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n().currentOpenRoom.currentOpenRoom._id===e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=8,k.a.get("".concat(I,"/").concat(e),o);case 8:s=t.sent,i=s.data.data,a({type:"UPDATE_CURRENT_OPEN_ROOM",payload:i}),localStorage.setItem("currentRoom",JSON.stringify(i)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),a({type:"HANDLE_ACCEPT_ROOM_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e,a){return t.apply(this,arguments)}}()},ve=Object(d.a)({palette:{primary:O.a}}),ye=function(e){var t=e.open,a=e.setOpen,o=ie(),s=Object(A.b)(),i=Object(n.useState)(""),c=Object(l.a)(i,2),u=c[0],p=c[1],d=Object(A.c)((function(e){return e.createRoom})),m=d.loading,g=d.success,b=d.err,v=function(){a(!1),p("")};return Object(n.useEffect)((function(){g&&p("")}),[g]),r.a.createElement(ce.a,{fullWidth:!0,maxWidth:"md",className:o.test,open:t,onClose:v,"aria-labelledby":"form-dialog-title"},m?r.a.createElement(me,{message:"Creating new chat ..."}):b?r.a.createElement(me,{severity:"error",message:b}):g?r.a.createElement(me,{severity:"success",message:"Room created successfully"}):r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Other Person Email"," "),r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),s((t="".concat(u).trim(),function(){var e=Object(C.a)(w.a.mark((function e(a,n){var r,o,s,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"CREATE_ROOM_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},e.next=6,k.a.post("".concat(I,"/createNewRoom"),{otherUserEmail:t},o);case 6:s=e.sent,i=s.data.data,a({type:"CREATE_ROOM_SUCCESS",payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:"CREATE_ROOM_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))}},r.a.createElement(ue.a,null,r.a.createElement(h.a,{theme:ve},r.a.createElement(f.a,{className:o.text,autoFocus:!0,margin:"dense",id:"email",label:"Email Address",type:"email",fullWidth:!0,onChange:function(e){return p(e.target.value)},value:u,disabled:m}))),r.a.createElement(pe.a,null,r.a.createElement(E.a,{className:o.addChatDialogBtn,onClick:v,variant:"contained"},"Cancel"),r.a.createElement(E.a,{className:o.addChatDialogBtn,disabled:u.length<1||m,variant:"contained",type:"submit",endIcon:m&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Add Chat"))))},Oe=function(e){var t=e.setOpenUpdateMe,a=se(),o=Object(A.b)(),s=Object(n.useState)(!1),i=Object(l.a)(s,2),c=i[0],u=i[1],p=Object(A.c)((function(e){return e.loginUser})).user,d=function(){o((function(e,t){e({type:"LOGOUT_USER"}),e({type:"CURRENT_OPEN_ROOM_RESET3"}),e({type:"CURRENT_USER_DATA_RESET"}),e({type:"GET_MY_ROOMS_RESET"}),e({type:"GET_ROOM_MESSAGES_RESET"}),localStorage.removeItem("loggedInUser"),localStorage.removeItem("currentRoom"),localStorage.removeItem("currentChattingUserData"),localStorage.removeItem("currentOpenRoomId"),t().socket.disconnect()}))},m=r.a.useState(null),g=Object(l.a)(m,2),h=g[0],f=g[1],E=Boolean(h),b=function(){f(null)};return r.a.createElement("div",{className:a.root},r.a.createElement(Z.a,{onClick:function(){return t(!0)}},r.a.createElement(B.a,{src:"".concat(p.photo)})),r.a.createElement("div",{className:a.sidebarIcons},r.a.createElement(ye,{open:c,setOpen:u}),r.a.createElement(Z.a,{onClick:function(){return u(!0)},className:a.addChat},r.a.createElement(te.a,null)),r.a.createElement(Z.a,null,r.a.createElement(ne.a,null)),r.a.createElement(Z.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){f(e.currentTarget)}},r.a.createElement(oe.a,null)),r.a.createElement("div",null,r.a.createElement($.a,{id:"long-menu",anchorEl:h,keepMounted:!0,open:E,onClose:b,PaperProps:{style:{maxHeight:216,width:"20ch"}}},r.a.createElement(ee.a,{onClick:function(){d(),b()},className:a.menuItem},"Logout")))))},xe=Object(u.a)((function(e){return{root:{height:"49px",width:"100%",backgroundColor:"#F6F6F6",padding:"10px",boxShadow:"0 1px 2px #ccc",borderBottom:"1px solid #bbb"},main:{background:"white",width:"100%",height:"100%",borderRadius:"20px",display:"flex",alignItems:"center",overflow:"hidden",padding:"2px 10px"},searchBox:{width:"100%",height:"100%",outline:"0",border:"none"},searchIcon:{color:"#919191",marginRight:"8px",fontSize:"20px"}}})),Se=a(85),we=a.n(Se),Ce=function(){var e=xe();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.main},r.a.createElement(we.a,{className:e.searchIcon}),r.a.createElement("input",{placeholder:"Search chats...",className:e.searchBox,type:"text"})))},Re=Object(u.a)((function(e){return{root:{flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"}}}})),_e=Object(u.a)((function(e){return{btnBase:{padding:0,margin:0,width:"100%",height:"72px"},root:{width:"100%",height:"72px",display:"flex",alignItems:"center",cursor:"pointer",borderBottom:"1px solid #F5F5F5","&:hover":{background:"#F5F5F5"},overflow:"hidden"},avatarContainer:{padding:"0 10px"},info:{flex:1,padding:"15px 10px",display:"flex",flexDirection:"column"},infoTop:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"7px",width:"100%"},name:{flex:"0.60",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"100%",fontWeight:"bold",fontFamily:"Noto Sans JP, sans-serif",textAlign:"left",height:"100%"},date:{flex:"0.40",fontSize:"12px",color:"#878787",fontWeight:"bold",height:"100%"},lastMsg:{width:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Noto Sans JP, sans-serif",color:"#626262",fontSize:"90%",textAlign:"left"},newChat:{color:"#009688",fontWeight:"bold"}}})),Ie=a(101),Te=a(50),Ne=a.n(Te),je=function(e){var t=e.room,a=_e(),n=Object(A.b)();return r.a.createElement(Ie.a,{onClick:function(){var e={userId:t.userToShowOnRoom._id};n(U(e,{type:"new"})),n(ge(t._id));var a=document.getElementById("new-message-input");a&&a.focus()},className:a.btnBase},r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.avatarContainer},r.a.createElement(B.a,{src:t.userToShowOnRoom.photo})),r.a.createElement("div",{className:a.info},r.a.createElement("div",{className:a.infoTop},r.a.createElement("div",{className:a.name},"".concat(t.userToShowOnRoom.fullName)),r.a.createElement("div",{className:a.date},Ne()(t.lastMessage.createdAt).format("hh:mm A"))),r.a.createElement("div",{className:a.lastMsg},t.new?r.a.createElement("span",{className:a.newChat},"New"):r.a.createElement("span",null,t.lastMessage.messageTXT)))))},ke=function(){var e=Re(),t=Object(A.b)(),a=Object(A.c)((function(e){return e.myRooms})),o=a.loading,s=void 0===o||o,i=a.rooms,c=a.err;return Object(n.useEffect)((function(){t(function(){var e=Object(C.a)(w.a.mark((function e(t,a){var n,r,o,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GET_MY_ROOMS_REQUEST"}),n="Bearer ".concat(a().loginUser.user.token),r={headers:{authorization:n}},e.next=6,k.a.get("".concat(I,"/getMyRooms"),r);case 6:o=e.sent,s=o.data.data,t({type:"GET_MY_ROOMS_SUCCESS",payload:s}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:"GET_MY_ROOMS_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.root},s?r.a.createElement(me,{message:"Loading Chats ..."}):c?r.a.createElement(me,{severity:"error",message:c}):i.length<1?r.a.createElement(me,{message:"You don't have chats yet \ud83d\ude0a"}):i.map((function(e){return r.a.createElement(je,{key:e._id,room:e})}))))},Ue=Object(u.a)((function(e){return{root:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"20",overflow:"auto",backgroundColor:"#EDEDED","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"}},closed:{left:"-100%"},header:{padding:"10px",paddingBottom:"20px",width:"100%",height:"108px",display:"flex",alignItems:"flex-end",justifyContent:"space-between",position:"relative",backgroundColor:"#00BFA5",zIndex:"10",color:"white",fontSize:"19px"},saveChangesContainer:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},saveChanges:{position:"relative",color:"black","& *":{fontSize:"30px"}},savingUpdatingChanges:{position:"absolute"},profilePhotoContainer:{width:"100%",backgroundColor:"#EDEDED",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},photoContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center"},photoInput:{display:"none"},inputLabel:{width:"200px",height:"200px",borderRadius:"50%",backgroundColor:"#eee",border:"2px solid #ddd",cursor:"pointer","&>div:hover":{opacity:"1"}},cameraIconContainer:{position:"relative",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",opacity:"0.5","&>*":{width:"70%",height:"70%",position:"absolute"}},avatarContainer:{width:"100%",height:"100%",position:"relative","&:hover>.controllersContainer":{opacity:"1"},"& .MuiAvatar-root":{width:"100%",height:"100%"}},controllersContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"absolute",zIndex:"10",overflow:"hidden",borderRadius:"50%",opacity:"0"},resetPhotoBtn:{opacity:"0.3",width:"100%",height:"50%",backgroundColor:"rgba(255,0,0,0.5)",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"10px","&:hover":{opacity:"1"},"&>*":{width:"90%",height:"90%"}},uploadNewPhoto:{opacity:"0.3",width:"100%",height:"50%",backgroundColor:"rgba(0,0,255,0.5)",color:"white",display:"flex",justifyContent:"center",cursor:"pointer",alignItems:"center",fontSize:"10px","&:hover":{opacity:"1"},"&>*":{width:"90%",height:"90%"}},profileImage:{position:"absolute",zIndex:"1",width:"100%",height:"100%",borderRadius:"50%"},nameContainer:{width:"100%",backgroundColor:"#ffffff",padding:"10px 15px",paddingBottom:"20px",boxShadow:"0 1px 3px #ccc, 0 -1px 3px #ccc "},yourNameTXT:{color:"#009688"},firstName:{padding:"0 5px"},InputBorder:{colorSecondary:"#019688"},firstNameInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},aboutContainer:{width:"100%",backgroundColor:"#ffffff",padding:"10px 15px",marginTop:"10px",paddingBottom:"20px",boxShadow:"0 1px 3px #ccc, 0 -1px 3px #ccc "}}})),Ae=a(269),Me=a(270),De=a(271),Pe=function(e){var t=e.open,a=e.setOpenUpdateMe,o=Ue(),s=Object(A.b)(),u=Object(d.a)({palette:{primary:O.a}}),p=Object(A.c)((function(e){return e.loginUser})).user,m=Object(A.c)((function(e){return e.updateMe})),g=m.loading,E=m.success,b=m.err,v=Object(n.useState)({firstName:"",about:"",photo:""}),x=Object(l.a)(v,2),S=x[0],I=x[1],T=Object(n.useState)(!1),N=Object(l.a)(T,2),j=N[0],U=N[1],M=Object(n.useState)(!1),D=Object(l.a)(M,2),P=D[0],L=D[1],z=function(e){var t=e.target,a=t.name,n=t.value;I(Object(c.a)(Object(c.a)({},S),{},Object(i.a)({},a,n)))},G=function(){var e=Object(C.a)(w.a.mark((function e(t){var a,n,r,o,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),t.target.value){e.next=4;break}return e.abrupt("return");case 4:return I(Object(c.a)(Object(c.a)({},S),{},{photo:""})),a=t.target.files[0],(n=new FormData).append("photo",a),U(!0),e.prev=9,r={headers:{"Content-Type":"multipart/form-data"}},e.next=13,k.a.post("".concat(R,"/api/v1/upload"),n,r);case 13:o=e.sent,s=o.data,I(Object(c.a)(Object(c.a)({},S),{},{photo:s.path})),U(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(9),alert("ERROR UPLOADING YOUR IMAGE"),console.log(e.t0),U(!1);case 24:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){I(p)}),[p]),Object(n.useEffect)((function(){S.firstName.trim()!==p.firstName.trim()||S.about.trim()!==p.about.trim()||S.photo!==p.photo?L(!0):L(!1)}),[S]),Object(n.useEffect)((function(){E&&(s({type:"UPDATE_USER_RESET"}),a(!1))}),[s,E]),r.a.createElement("div",{className:o.root+" "+(t?"":o.closed)},b&&r.a.createElement(me,{severity:"error",message:b}),r.a.createElement("div",{className:o.header},r.a.createElement("div",null,r.a.createElement(Z.a,{style:{color:"white"},onClick:function(){return a(!1)}},r.a.createElement(Ae.a,null))," ","Profile"),r.a.createElement("div",{className:o.saveChangesContainer},g&&r.a.createElement(y.a,{className:o.savingUpdatingChanges,color:"secondary"}),r.a.createElement(Z.a,{disabled:!P||g,title:"Save changes",className:o.saveChanges,onClick:function(){s(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"UPDATE_USER_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,k.a.patch("".concat(_,"/updateMe"),e,o);case 6:s=t.sent,i=s.data.data,a({type:"UPDATE_USER_SUCCESS",payload:i}),c=n().loginUser.user,localStorage.setItem("loggedInUser",JSON.stringify(c)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"UPDATE_USER_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(S))}},r.a.createElement(Me.a,null)))),r.a.createElement("div",{className:o.content},r.a.createElement("section",{className:o.profilePhotoContainer},r.a.createElement("input",{type:"file",id:"profile-photo",label:"Choose your image",onChange:G,accept:"image/*",className:o.photoInput}),r.a.createElement("label",{htmlFor:"profile-photo",className:o.inputLabel},r.a.createElement("div",{style:S.photo?{display:"none"}:{},className:o.cameraIconContainer},r.a.createElement(F.a,{style:j?{display:"none"}:{}}),r.a.createElement(y.a,{style:j?{}:{display:"none"},className:o.photoUploading,color:"secondary"})),r.a.createElement("div",{style:S.photo?{}:{display:"none"},className:o.avatarContainer},r.a.createElement("div",{className:o.controllersContainer+" controllersContainer"},r.a.createElement("label",{htmlFor:"profile-photo",title:"Upload new photo",className:o.uploadNewPhoto},r.a.createElement(De.a,null)),r.a.createElement("span",{title:"Remove this photo",onClick:function(e){I(Object(c.a)(Object(c.a)({},S),{},{photo:""})),e.preventDefault(),e.stopPropagation()},className:o.resetPhotoBtn},r.a.createElement(W.a,null))),r.a.createElement(B.a,{src:S.photo,alt:"user profile",className:o.profileImage})))),r.a.createElement("section",{className:o.nameContainer},r.a.createElement("header",{className:o.yourNameTXT},"Your Name"),r.a.createElement(h.a,{theme:u},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"standard",label:"Name",required:!0,name:"firstName",type:"text",id:"firstName",autoComplete:"first-name",onChange:z,value:S.firstName,className:o.firstName,InputProps:{className:o.firstNameInput,classes:{}}}))),r.a.createElement("section",{className:o.aboutContainer},r.a.createElement("header",{className:o.yourNameTXT},"About"),r.a.createElement(h.a,{theme:u},r.a.createElement(f.a,{fullWidth:!0,margin:"normal",variant:"standard",label:"About",required:!0,name:"about",type:"text",id:"about",autoComplete:"about",onChange:z,value:S.about,className:o.firstName,InputProps:{className:o.firstNameInput,classes:{}}})))))},Le=function(){var e=V(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0],s=a[1];return r.a.createElement("div",{className:e.root},r.a.createElement(Oe,{setOpenUpdateMe:s}),r.a.createElement(Ce,null),r.a.createElement(ke,null),r.a.createElement(Pe,{setOpenUpdateMe:s,open:o}))},Be=Object(u.a)((function(e){return{root:{background:"#F8F9FA",height:"100%",overflow:"hidden",flex:"0.65"}}})),Fe=Object(u.a)((function(e){return{root:{width:"100%",height:"100%",backgroundColor:"#F8F9FA",borderBottom:"10px solid #4ADF83",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},mainLogo:{width:"250px",height:"250px"},mainText:{marginTop:"28px",fontSize:"32px",color:"#525252",fontWeight:"300",fontFamily:"Noto Sans JP, sans-serif",textAlign:"center",padding:"0 20px"},subTitle:{fontSize:"14px",color:"#888989",fontFamily:"Noto Sans JP, sans-serif",textAlign:"center",lineHeight:"20px",marginTop:"25px",padding:"0 50px"},contactMe:{marginTop:"20px",fontSize:"20px",color:"#525252",fontWeight:"300",fontFamily:"Noto Sans JP, sans-serif",textAlign:"center",padding:"0 20px","&>a":{color:"#009688",fontWeight:"bold"}}}})),We=function(){var e=Fe();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{className:e.mainLogo,src:"https://web.whatsapp.com/img/intro-connection-light_c98cc75f2aa905314d74375a975d2cf2.jpg",alt:"main logo"}),r.a.createElement("h1",{className:e.mainText},"Welcome to WhatsApp Clone"),r.a.createElement("div",{className:e.subTitle},"This is a testing WhatsApp version, not for profiting purposes. ",r.a.createElement("br",null)),r.a.createElement("h1",{className:e.contactMe},"Fully programmed by Amr Mohammed Hassan"," ",r.a.createElement(x.b,{to:"/contactAmr"},"Contact Me")))},ze=Object(u.a)((function(e){return{root:{display:"flex",height:"100%",flexDirection:"column",backgroundColor:"#E5DDD5",position:"relative"},bgObjects:{backgroundImage:'url("./images/other/chat_default_background.png")',backgroundSize:"contain",backgroundColor:"#E5DDD5",backgroundPosition:"fixed",position:"absolute",zIndex:"0",top:"0",left:"0",width:"100%",height:"100%",opacity:"0.1"},acceptChat:{width:"100%",textAlign:"center",padding:"10px 15px","&>button":{fontWeight:"bold"}}}})),Ge=a(272),He=Object(u.a)((function(e){return{root:{padding:"10px 0",width:"100%",height:"59px",display:"flex",alignItems:"center",position:"relative",justifyContent:"space-between",backgroundColor:"#EDEDED",boxShadow:"0 1px 2px #ccc",zIndex:"10"},sidebarIcons:{},userInfoBtnBase:{},userInfo:{display:"flex",alignItems:"center",padding:"10px"},avatarContainer:{marginRight:"10px"},info:{textAlign:"lef",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},name:{width:"100px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"100%",fontWeight:"bold",fontFamily:"Noto Sans JP, sans-serif",textAlign:"left"},status:{width:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Noto Sans JP, sans-serif",color:"#626262",fontSize:"90%",textAlign:"left"}}})),Qe=function(e){var t=e.currentOpenRoom,a=He(),o=Object(A.b)(),s=Object(n.useState)(!1),i=Object(l.a)(s,2),c=i[0],u=i[1],p=Object(A.c)((function(e){return e.currentChattingUserData})),d=p.status,m=function(){u(!1)},g=function(){var e;o((e=t._id,function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"DELETE_ROOM_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,k.a.delete("".concat(I,"/").concat(e),o);case 6:s=t.sent,i=s.data.data,a({type:"DELETE_ROOM_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"DELETE_ROOM_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))},h=function(){o(fe(t._id,t.userToShowOnRoom._id)),x()},f=r.a.useState(null),b=Object(l.a)(f,2),v=b[0],y=b[1],O=Boolean(v),x=function(){y(null)};return Object(n.useEffect)((function(){o(U({userId:p._id},{type:"new",force:!0}))}),[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.root},r.a.createElement(Ie.a,{className:a.userInfoBtnBase},r.a.createElement("div",{className:a.userInfo},r.a.createElement("div",{className:a.avatarContainer},r.a.createElement(B.a,{src:p.photo})),r.a.createElement("div",{className:a.info},r.a.createElement("div",{className:a.name},p.fullName),r.a.createElement("div",{className:a.status},d&&"startTyping"===d?"Typing ...":"online"===d?"Online":"offline"===d?"Last seen at ".concat(Ne()(p.lastSeenAt).format("hh:mm A")):"stopTyping"===d?"Online":"")))),r.a.createElement("div",{className:a.sidebarIcons},r.a.createElement(Z.a,null,r.a.createElement(we.a,null)),r.a.createElement(Z.a,{onClick:function(e){y(e.currentTarget)}},r.a.createElement(oe.a,null)),r.a.createElement("div",null,r.a.createElement($.a,{id:"long-menu",anchorEl:v,keepMounted:!0,open:O,onClose:x,PaperProps:{style:{maxHeight:216,width:"20ch"}}},r.a.createElement(ee.a,{onClick:function(){u(!0),x()},className:a.menuItem},"Delete Chat"),r.a.createElement(ee.a,{onClick:t.myBlock?function(){o(Ee(t._id,t.userToShowOnRoom._id)),x()}:h,className:a.menuItem},t.myBlock?"Unblock":"Block"))),r.a.createElement(ce.a,{open:c,keepMounted:!0,onClose:m,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(le.a,{id:"alert-dialog-slide-title"},"Delete Chat with"," ",t.userToShowOnRoom.firstName+" "+t.userToShowOnRoom.lastName),r.a.createElement(ue.a,null,r.a.createElement(Ge.a,{id:"alert-dialog-slide-description"},"Are you sure you want to deleted this chat.",r.a.createElement("span",{style:t.myBlock?{display:"none"}:{}},r.a.createElement(E.a,{onClick:function(){h(),m()},variant:"text",color:"secondary"},"Block"),"Instead?"))),r.a.createElement(pe.a,null,r.a.createElement(E.a,{onClick:m,color:"primary"},"No"),r.a.createElement(E.a,{onClick:function(){g(),m()},color:"secondary"},"Yes"))))))},Ye=Object(u.a)((function(e){return{root:{flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"},position:"relative",zIndex:10,scrollBehavior:"smooth"},earlierMessagesBtn:{position:"absolute",right:"10px",bottom:"70px",zIndex:"1000",backgroundColor:"white",borderRadius:"50%",boxShadow:"0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2);"}}})),Je=Object(u.a)((function(e){return{root:{width:"100%",padding:"10px 8%",position:"relative","&>div":{maxWidth:"90%"}},otherMessage:{background:"white",padding:"6px 7px 8px 9px",display:"inline-block",borderRadius:"0 10px 10px 10px ",position:"relative",boxShadow:"0 1px .5px rgba(0, 0, 0,.13)"},otherMessageText:{padding:"15px 0",overflowWrap:" break-word"},otherMessageDate:{textAlign:"right",fontSize:"11px",color:"#8C8C8C"},myMessage:{background:"#DCF8C6",padding:"6px 7px 8px 9px",display:"inline-block",borderRadius:"10px 0 10px 10px ",position:"relative",boxShadow:"0 1px .5px rgba(0, 0, 0,.13)"},myMessageText:{padding:"15px 0",overflowWrap:" break-word"},myMessageDate:{textAlign:"right",fontSize:"11px",color:"#8C8C8C"},msgStatus:{paddingLeft:"5px","& > img":{width:"15px",height:"auto"}},adminMessage:{display:"inline-block",backgroundColor:"#E3F6FE",boxShadow:"0 1px .5px rgba(0, 0,0,.13)",padding:"10px 12px",borderRadius:"10px",textTransform:"uppercase",color:"#1D1E1F",fontSize:"12.5px",fontFamily:"'Roboto Condensed', sans-serif ",fontWeight:"bold",userSelect:"none"}}})),qe=function(e){var t=e.status;return r.a.createElement("span",null,"delivered"===t&&r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15"},r.a.createElement("path",{fill:"currentColor",d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})),"sent"===t&&r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15"},r.a.createElement("path",{fill:"currentColor",d:"M10.91 3.316l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})),"seen"===t&&r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15",color:"#4FC3F7"},r.a.createElement("path",{fill:"currentColor",d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})),"written"===t&&r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15"},r.a.createElement("path",{fill:"currentColor",d:"M9.75 7.713H8.244V5.359a.5.5 0 0 0-.5-.5H7.65a.5.5 0 0 0-.5.5v2.947a.5.5 0 0 0 .5.5h.094l.003-.001.003.002h2a.5.5 0 0 0 .5-.5v-.094a.5.5 0 0 0-.5-.5zm0-5.263h-3.5c-1.82 0-3.3 1.48-3.3 3.3v3.5c0 1.82 1.48 3.3 3.3 3.3h3.5c1.82 0 3.3-1.48 3.3-3.3v-3.5c0-1.82-1.48-3.3-3.3-3.3zm2 6.8a2 2 0 0 1-2 2h-3.5a2 2 0 0 1-2-2v-3.5a2 2 0 0 1 2-2h3.5a2 2 0 0 1 2 2v3.5z"})))},Ke=function(e){var t=e.message,a=e.sender,o=Je(),s=Object(n.useState)(""),i=Object(l.a)(s,2),c=i[0],u=i[1];return Object(n.useEffect)((function(){u(t.createdAt)}),[t.createdAt]),r.a.createElement("div",{className:o.root,style:"other"===a?{textAlign:"left"}:"admin"===a?{textAlign:"center"}:{textAlign:"right"}},"other"===a&&r.a.createElement("div",{className:o.otherMessage+" otherMessage"},r.a.createElement("div",{className:o.otherMessageText},t.messageTXT),r.a.createElement("div",{className:o.otherMessageDate},Ne()(c).format("hh:mm A"))),"me"===a&&r.a.createElement("div",{className:o.myMessage+" myMessage"},r.a.createElement("div",{className:o.myMessageText},t.messageTXT),r.a.createElement("div",{className:o.myMessageDate},Ne()(c).format("hh:mm A"),r.a.createElement("span",{className:o.msgStatus},r.a.createElement(qe,{status:t.status})))),"admin"===a&&r.a.createElement("div",{className:o.adminMessage+" adminMessage"},r.a.createElement("div",{className:o.adminMessageText},t.messageTXT)))},Xe=a(135),Ve=a.n(Xe),Ze=Object(u.a)((function(e){return{root:{flex:1}}})),$e=function(e){var t=e.message,a=e.severity,n=e.children,o=Ze();return r.a.createElement("div",{className:o.root},r.a.createElement(me,{message:t,severity:a}),n)},et=Object(u.a)((function(e){return{root:{width:"100%",padding:"10px 8%",position:"relative","&>div":{maxWidth:"90%"}},otherMessage:{background:"white",padding:"12px 15px",display:"inline-block",borderRadius:"0 10px 10px 10px ",position:"relative",boxShadow:"0 1px .5px rgba(0, 0, 0,.13)"},otherMessageText:{overflowWrap:" break-word"},typingDot:{display:"inline-block",width:"10px",height:"10px",backgroundColor:"#ccc",marginRight:"5px",borderRadius:"50%",animation:"animateTypingDots 0.75s linear infinite","&:nth-child(1)":{animationDelay:"0"},"&:nth-child(2)":{animationDelay:"0.1s"},"&:nth-child(3)":{animationDelay:"0.2s",paddingRight:"0"}}}})),tt=function(){var e=et();return r.a.createElement("div",{className:e.root,style:{textAlign:"left"}},r.a.createElement("div",{className:e.otherMessage+" otherMessage"},r.a.createElement("div",{className:e.otherMessageText},r.a.createElement("span",{className:e.typingDot}),r.a.createElement("span",{className:e.typingDot}),r.a.createElement("span",{className:e.typingDot}))))},at=function(e){var t=e.user,a=Ye(),o=Object(A.c)((function(e){return e.roomMessages})),s=o.loading,i=void 0===s||s,c=o.messages,l=o.err,u=Object(A.c)((function(e){return e.currentChattingUserData})).status,p=function(){document.getElementById("messages-container").scrollTo(0,document.getElementById("messages-container").scrollHeight)};return Object(n.useEffect)((function(){var e=document.getElementById("messages-container");(0===e.scrollTop||e.scrollHeight-(e.scrollTop+e.clientHeight)<300)&&p(),(0===e.scrollTop||e.scrollHeight-(e.scrollTop+e.clientHeight)<300)&&"startTyping"===u&&p()}),[c,u]),Object(n.useEffect)((function(){var e=document.getElementById("messages-container"),t=document.getElementById("down-arrow");e.onscroll=function(){e.scrollHeight-(e.scrollTop+e.clientHeight)<300?t.style.display="none":t.style.display="inline-flex"}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"messages-container",className:a.root},r.a.createElement(Ke,{message:{messageTXT:"Messages are stored in secure server \ud83d\udd10"},sender:"admin"}),i?r.a.createElement($e,{message:"Getting messages ..."}):l?r.a.createElement($e,{severity:"error",message:l}):r.a.createElement(r.a.Fragment,null,c.map((function(e){return r.a.createElement(Ke,{key:e.clientId,message:e,sender:e.sender!==t._id&&e.sender?"admin"===e.sender?"admin":"other":"me"})})),u&&"startTyping"===u&&r.a.createElement(tt,null))),r.a.createElement("div",{className:a.earlierMessagesBtn},r.a.createElement(Z.a,{onClick:p,style:{width:"40px",height:"40px",display:"none"},id:"down-arrow"},r.a.createElement(Ve.a,{style:{fontSize:"25px"}}))))},nt=a(273),rt=Object(u.a)((function(e){return{root:{width:"100%",minHeight:"62px",backgroundColor:"#F0F0F0",position:"relative",zIndex:"10",display:"flex",alignItems:"center"},msgBox:{flex:1,height:"100%",padding:"10px 20px",paddingRight:"0"},msgInput:{width:"100%",height:"100%",outline:"none",border:"none",padding:"10px 15px",borderRadius:"20px",fontSize:"15px",color:"#4A4A4A",fontFamily:"'Roboto', sans-serif",fontWeight:"bold",maxHeight:"200px",resize:"none",overflow:"hidden",userSelect:"none",backgroundColor:"white"},send:{color:"#9B9B9B"}}})),ot=function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i,c,l,u,p;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n().currentOpenRoom.currentOpenRoomId,o=n().loginUser.user._id,s=e.sender,i=e.room,c=e._id,l=!s&&!c,u=s===o,p=s!==o,r===i&&a({type:"UPDATE_DISPLAYED_MESSAGES",payload:{message:e,addMyMessage:l,updateMyMessage:u,addOtherMessage:p}});case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},st=a(282),it=function(e){var t=e.currentOpenRoom,a=e.user,o=rt(),s=Object(A.b)(),i=Object(n.useState)(""),c=Object(l.a)(i,2),u=c[0],p=c[1],d=Object(n.useState)(!1),m=Object(l.a)(d,2),g=m[0],h=m[1],f=Object(A.c)((function(e){return e.socket})),E=Object(A.c)((function(e){return e.currentChattingUserData})),b=E.status;return Object(n.useEffect)((function(){u.trim()?h(!0):h(!1)}),[u]),Object(n.useEffect)((function(){"online"!==b&&"startTyping"!==b&&"stopTyping"!==b||!f.id||(g?f.emit("user-currently-typing",{typingUserId:a._id,onlineUserId:E.onlineId,typingUserOnlineId:f.id}):f.emit("user-stopped-typing",{typingUserId:a._id,onlineUserId:E.onlineId,typingUserOnlineId:f.id}))}),[t,f,b,g,a,E.onlineId]),Object(n.useEffect)((function(){p(""),f.id&&f.emit("user-stopped-typing",{typingUserId:a._id,onlineUserId:E.onlineId,typingUserOnlineId:f.id})}),[E._id]),r.a.createElement("form",{className:o.root,onSubmit:function(e){if(e.preventDefault(),u){var a={room:t._id,receiver:t.userToShowOnRoom._id,messageTXT:u,clientId:Object(st.a)(),status:"written"};s(ot(a)),s(function(e){return function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CREATE_MESSAGE_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,k.a.post("".concat(T,"/createMessage"),e,o);case 6:s=t.sent,i=s.data.data,a({type:"CREATE_MESSAGE_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"CREATE_MESSAGE_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(a)),h(!1),p("")}}},r.a.createElement("div",{className:o.msgBox},r.a.createElement("input",{id:"new-message-input",autoFocus:!0,placeholder:"Type a message",type:"text",className:o.msgInput,rows:"1",value:u,onChange:function(e){p(e.target.value)},autoComplete:"false"})),r.a.createElement("div",{className:o.send},r.a.createElement(Z.a,{disabled:!u&&!0,type:"submit"},r.a.createElement(nt.a,{style:{color:"#9B9B9B"}}))))},ct=Object(u.a)((function(e){return{root:{width:"100%",height:"100px",position:"relative",zIndex:"10",textAlign:"center","&>button":{marginTop:"10px",fontWeight:"bold"}}}})),lt=function(e){var t=e.message,a=e.onAccept,n=e.onBlock,o=ct();return r.a.createElement("div",{className:o.root},r.a.createElement(me,{message:t}),r.a.createElement(E.a,{style:{marginRight:"10px"},variant:"outlined",margin:"normal",onClick:a},"Accept"),r.a.createElement(E.a,{variant:"outlined",margin:"normal",onClick:n},"Block"))},ut=Object(u.a)((function(e){return{root:{width:"100%",position:"relative",zIndex:"10",textAlign:"center","&>button":{marginTop:"10px",fontWeight:"bold"}}}})),pt=function(e){var t=e.severity,a=e.message,n=e.onUnBlock,o=ut();return r.a.createElement("div",{className:o.root},r.a.createElement(me,{severity:t,message:a}),n&&r.a.createElement(E.a,{style:{marginRight:"10px"},variant:"outlined",margin:"normal",onClick:n},"UnBlock"))},dt=function(e){var t=e.currentOpenRoom,a=e.currentOpenRoomId,o=ze(),s=Object(A.b)(),i=Object(A.c)((function(e){return e.loginUser})).user;Object(n.useEffect)((function(){var e;s((e=a,function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"GET_ROOM_MESSAGES_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{authorization:r}},t.next=6,k.a.get("".concat(T,"/getRoomMessages/").concat(e),o);case 6:s=t.sent,i=s.data.data,a({type:"GET_ROOM_MESSAGES_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"GET_ROOM_MESSAGES_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[a,s]);return r.a.createElement("div",{className:o.root},a&&r.a.createElement(Qe,{currentOpenRoom:t}),t.myBlock||t.otherUserBlock?null:a&&!t.accepted?t.otherUser===i._id?r.a.createElement(lt,{onAccept:function(){var e;s((e=a,function(){var t=Object(C.a)(w.a.mark((function t(a,n){var r,o,s,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"HANDLE_ACCEPT_ROOM_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,k.a.post("".concat(I,"/acceptRoom"),{room:e},o);case 6:s=t.sent,i=s.data.data,a({type:"HANDLE_ACCEPT_ROOM_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"HANDLE_ACCEPT_ROOM_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))},onBlock:function(){s(fe(a,t.userToShowOnRoom._id))},message:"".concat(t.userToShowOnRoom.firstName," wants to chat you")}):r.a.createElement($e,{message:"Wait until ".concat(t.userToShowOnRoom.firstName," accept your request")}):null,t.myBlock?r.a.createElement(pt,{message:"You blocked ".concat(t.userToShowOnRoom.fullName),onUnBlock:function(){s(Ee(a,t.userToShowOnRoom._id))}}):t.otherUserBlock?r.a.createElement(pt,{message:"You are blocked from ".concat(t.userToShowOnRoom.fullName),severity:"error"}):null,t.accepted&&r.a.createElement(at,{user:i}),a&&t.accepted&&!t.myBlock&&!t.otherUserBlock&&r.a.createElement(it,{currentOpenRoom:t,user:i}),r.a.createElement("div",{className:o.bgObjects}))},mt=function(){var e=Object(A.b)(),t=Object(A.c)((function(e){return e.currentOpenRoom})),a=t.currentOpenRoomId,o=t.currentOpenRoom,s=void 0===o?{}:o;Object(n.useEffect)((function(){a&&!s._id&&e(ge(a))}),[s,a,e]);var i=Be();return r.a.createElement("div",{className:i.root},a&&s._id?r.a.createElement(dt,{currentOpenRoomId:a,currentOpenRoom:s}):r.a.createElement(We,null))},gt=a(136),ht=a.n(gt),ft=function(e){var t=e.history,a=X(),o=Object(A.b)(),s=Object(A.c)((function(e){return e.loginUser})).user,i=Object(A.c)((function(e){return e.socket}));return Object(n.useEffect)((function(){s&&s.token?o((function(e,t){var a=t().loginUser.user;e({type:"CREATE_SOCKET",payload:ht.a.connect(R,{query:{id:a._id}})})})):t.replace("/login")}),[o,t,s]),Object(n.useEffect)((function(){i.on&&(i.on("server--user-send-message",(function(e){var t,a;o((t=e.room,function(){var e=Object(C.a)(w.a.mark((function e(a,n){var r,o,s,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},e.next=5,k.a.get("".concat(I,"/").concat(t),o);case 5:s=e.sent,i=s.data.data,a({type:"UPDATE_ROOM_PUT_UP",payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"HANDLE_ACCEPT_ROOM_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}())),o(ot(e)),o((a=e,function(e,t){var n=t().currentChattingUserData,r=t().socket,o=t().currentOpenRoom.currentOpenRoomId,s=t().loginUser.user._id,i=a.sender,c=a.room,l=i!==s,u=n.status;l&&c===o&&u.match(/online|startTyping|stopTyping/)&&r.emit("user-read-message",{message:a,senderOnlineId:n.onlineId})}))})),i.on("server--user-added-new-room",(function(e){o(he(e)),o({type:"CREATE_ROOM_RESET"})})),i.on("server--user-accept-new-room",(function(e){o(he(e)),o(be(e._id))})),i.on("server--user-delete-chat",(function(e){o(function(e){return function(t,a){a().currentOpenRoom.currentOpenRoom._id===e&&(localStorage.removeItem("currentRoom"),t({type:"CURRENT_OPEN_ROOM_RESET3",payload:e})),t({type:"UPDATE_ROOMS_AFTER_DELETING",payload:e})}}(e))})),i.on("server--user-block-room",(function(e){o(be(e.room))})),i.on("server--user-unblock-room",(function(e){o(be(e.room))})),i.on("server--user-online",(function(e){var t=e.userId,a=e.onlineId;o(U({status:"online",userId:t,onlineId:a}))})),i.on("server--user-offline",(function(e){var t=e.userId,a=e.lastSeenAt;o(U({status:"offline",userId:t,lastSeenAt:a}))})),i.on("server--user-currently-typing",(function(e){var t=e.userId,a=e.typingUserOnlineId;o(U({status:"startTyping",userId:t,typing:!0,typingUserOnlineId:a}))})),i.on("server--user-stopped-typing",(function(e){var t=e.userId,a=e.typingUserOnlineId;o(U({status:"stopTyping",userId:t,typing:!1,typingUserOnlineId:a}))})))}),[o,i]),s&&s.token?r.a.createElement("div",{className:a.root},r.a.createElement(Le,null),r.a.createElement(mt,null)):null},Et=a(277),bt=a(216),vt=a(258),yt=a(278),Ot=a(275),xt=a(276),St=a(137),wt=a.n(St),Ct=a(274),Rt=Object(u.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),_t=r.a.forwardRef((function(e,t){return r.a.createElement(Ct.a,Object.assign({direction:"up",ref:t},e))}));function It(){var e=Rt(),t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],s=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:function(){o(!0)}},"Open full-screen dialog"),r.a.createElement(ce.a,{fullScreen:!0,open:n,onClose:s,TransitionComponent:_t},r.a.createElement(Ot.a,{className:e.appBar},r.a.createElement(xt.a,null,r.a.createElement(Z.a,{edge:"start",color:"inherit",onClick:s,"aria-label":"close"},r.a.createElement(wt.a,null)),r.a.createElement(g.a,{variant:"h6",className:e.title},"Sound"),r.a.createElement(E.a,{autoFocus:!0,color:"inherit",onClick:s},"save"))),r.a.createElement(vt.a,null,r.a.createElement(bt.a,{button:!0},r.a.createElement(Et.a,{primary:"Phone ringtone",secondary:"Titania"})),r.a.createElement(yt.a,null),r.a.createElement(bt.a,{button:!0},r.a.createElement(Et.a,{primary:"Default notification ringtone",secondary:"Tethys"})))))}var Tt=a(20),Nt=function(){return r.a.createElement(x.a,null,r.a.createElement(Tt.a,{path:"/login",component:D}),r.a.createElement(Tt.a,{path:"/signup",component:G}),r.a.createElement(Tt.a,{path:"/home",component:ft}),r.a.createElement(Tt.a,{path:"/forgotPassword",component:Y}),r.a.createElement(Tt.a,{path:"/resetPassword/:token",component:K}),r.a.createElement(Tt.a,{path:"/test",component:It}),r.a.createElement(Tt.a,{path:"/",component:ft,exact:!0}))},jt=a(49),kt=a(138),Ut=a(139),At=a(67),Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clientId",n=e.find((function(e){return e[a]===t[a]})),r=e.indexOf(n);return e.splice(r,1,t),e},Dt=Object(jt.combineReducers)({loginUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return{loading:!0};case"LOGIN_SUCCESS":return{loading:!1,user:t.payload,success:!0};case"LOGIN_FAIL":return{loading:!1,err:t.payload};case"SIGNUP_REQUEST":return{loading:!0};case"SIGNUP_SUCCESS":return{loading:!1,user:t.payload,success:!0};case"SIGNUP_FAIL":return{loading:!1,err:t.payload};case"LOGOUT_USER":return{};case"UPDATE_USER_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{user:Object(c.a)(Object(c.a)({},e.user),t.payload)});default:return e}},myRooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rooms:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MY_ROOMS_REQUEST":return{loading:!0};case"GET_MY_ROOMS_SUCCESS":return{loading:!1,rooms:t.payload};case"GET_MY_ROOMS_FAIL":return{loading:!1,err:t.payload};case"UPDATE_ROOM_PUT_UP":var a=t.payload._id,n=Object(At.a)(e.rooms).filter((function(e){return e._id!==a}));return n.unshift(t.payload),Object(c.a)(Object(c.a)({},e),{},{rooms:n});case"UPDATE_ROOMS_AFTER_DELETING":var r=t.payload,o=Object(At.a)(e.rooms).filter((function(e){return e._id!==r}));return Object(c.a)(Object(c.a)({},e),{},{rooms:o});case"GET_MY_ROOMS_RESET":return{};default:return e}},createRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ROOM_REQUEST":return{loading:!0};case"CREATE_ROOM_SUCCESS":return{loading:!1,room:t.payload,success:!0};case"CREATE_ROOM_FAIL":return{loading:!1,err:t.payload};case"CREATE_ROOM_RESET":return{};default:return e}},currentOpenRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentOpenRoomId:"",currentOpenRoom:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_OPEN_ROOM_REQUEST":return{loading:!0};case"CURRENT_OPEN_ROOM_SUCCESS":return{currentOpenRoom:t.payload,loading:!1,success:!0,currentOpenRoomId:t.payload._id};case"CURRENT_OPEN_ROOM_REQUEST":return{loading:!1,err:t.payload};case"CURRENT_OPEN_ROOM_RESET3":return{};case"UPDATE_CURRENT_OPEN_ROOM":return Object(c.a)(Object(c.a)({},e),{},{currentOpenRoom:t.payload});case"TYPING_MESSAGE":return Object(c.a)(Object(c.a)({},e),{},{typing:t.payload});default:return e}},roomMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ROOM_MESSAGES_REQUEST":return{loading:!0};case"GET_ROOM_MESSAGES_SUCCESS":return{loading:!1,messages:t.payload};case"GET_ROOM_MESSAGES_FAIL":return{loading:!1,err:t.payload};case"UPDATE_DISPLAYED_MESSAGES":try{var a=t.payload,n=a.message,r=a.addMyMessage,o=a.updateMyMessage,s=a.addOtherMessage,i=Object(At.a)(e.messages);if(r)i.push(n);else if(o){var l=Mt(i,n);i=l}else s?i.push(n):alert("Non expected state coming from message reducer check console");return Object(c.a)(Object(c.a)({},e),{},{messages:i})}catch(u){return e}case"GET_ROOM_MESSAGES_RESET":return{};default:return e}},createMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MESSAGE_REQUEST":return{loading:!0};case"CREATE_MESSAGE_SUCCESS":return{loading:!1,message:t.payload,success:!0};case"CREATE_MESSAGE_FAIL":return{loading:!1,err:t.payload};case"CREATE_MESSAGE_RESET":return{};default:return e}},socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_SOCKET":return t.payload;case"DISCONNECT_SOCKET":return{};default:return e}},userForgotPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT_PASSWORD_REQUEST":return{loading:!0};case"FORGOT_PASSWORD_SUCCESS":return{loading:!1,success:!0};case"FORGOT_PASSWORD_FAIL":return{loading:!1,err:t.payload};default:return e}},userResetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_PASSWORD_REQUEST":return{loading:!0};case"RESET_PASSWORD_SUCCESS":return{loading:!1,success:!0};case"RESET_PASSWORD_FAIL":return{loading:!1,err:t.payload};default:return e}},currentChattingUserData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_USER_DATA":return Object(c.a)(Object(c.a)({},e),t.payload);case"CURRENT_USER_DATA_RESET":return{};default:return e}},updateMe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER_REQUEST":return{loading:!0};case"UPDATE_USER_SUCCESS":return{loading:!1,success:!0};case"UPDATE_USER_FAIL":return{loading:!1,err:t.payload};case"UPDATE_USER_RESET":return{};default:return e}}}),Pt=localStorage.getItem("loggedInUser")?JSON.parse(localStorage.getItem("loggedInUser")):{},Lt=localStorage.getItem("currentChattingUserData")?JSON.parse(localStorage.getItem("currentChattingUserData")):{},Bt={loginUser:{user:Pt},currentOpenRoom:{currentOpenRoomId:localStorage.getItem("currentOpenRoomId")||"",currentOpenRoomData:{}},currentChattingUserData:Lt},Ft=[kt.a],Wt=Object(jt.createStore)(Dt,Bt,Object(Ut.composeWithDevTools)(jt.applyMiddleware.apply(void 0,Ft)));a(213);s.a.render(r.a.createElement(A.a,{store:Wt},r.a.createElement(Nt,null)),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.b313b0cf.chunk.js.map