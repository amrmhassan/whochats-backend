/*! For license information please see main.2fc5b1f7.chunk.js.LICENSE.txt */
(this["webpackJsonpwhats-app-clone"]=this["webpackJsonpwhats-app-clone"]||[]).push([[0],{154:function(e,t,a){e.exports=a(214)},213:function(e,t,a){},214:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),s=a.n(o),i=a(39),c=a(13),l=a(15),u=a(249),p=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),d=p,m=a(138),g=a(255),h=a(57),f=a(256),E=a(273),b=a(258),O=a(276),v=a(274),y=a(259),x=a(85),S=a(37),w=a(8),R=a.n(w),C=a(19),_="http://localhost:5000",T="".concat(_,"/api/v1/users"),I="".concat(_,"/api/v1/rooms"),N="".concat(_,"/api/v1/messages"),j="".concat(_,"/api/v1/blocks"),k=a(22),A=a.n(k),U=function(e){return function(t,a){var n=a().currentOpenRoom.currentOpenRoom||{};n.userToShowOnRoom&&e.userId===n.userToShowOnRoom._id&&t({type:"CURRENT_USER_STATUS",payload:e})}},M=a(6),D=Object(m.a)({palette:{primary:x.a}}),L=function(e){var t=e.history,a=Object(n.useState)({email:"",password:""}),o=Object(l.a)(a,2),s=o[0],u=o[1],p=d(),m=Object(M.b)(),x=Object(M.c)((function(e){return e.loginUser})),w=x.loading,_=x.user,I=x.err,N=x.success;function j(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}var k=function(e){var t=e.target,a=t.name,n=t.value;u(Object(c.a)(Object(c.a)({},s),{},Object(i.a)({},a,n)))};return Object(n.useEffect)((function(){_&&_.token&&t.push("/home")}),[m,t,_,N]),r.a.createElement(r.a.Fragment,null,N?r.a.createElement(O.a,{open:N,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(j,{severity:"success"},"Logged in successfully")):"",w?r.a.createElement(O.a,{open:w,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(j,{severity:"info"},"Logging in")):"",I?r.a.createElement(O.a,{open:I&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(j,{severity:"error"},I)):"",r.a.createElement("div",{className:p.root},r.a.createElement(g.a,{maxWidth:"xs"},r.a.createElement(h.a,{className:p.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Login",r.a.createElement("div",{className:p.loginLogo},r.a.createElement("img",{src:"images/login/loginLogo.png",alt:"Login Logo"}))),r.a.createElement("form",{className:p.loginFrom,onSubmit:function(e){e.preventDefault(),m(function(e){return function(){var t=Object(C.a)(R.a.mark((function t(a,n){var r,o,s,i,l,u;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"LOGIN_REQUEST"}),r={headers:{"Content-Type":"application/json"}},t.next=5,A.a.post("".concat(T,"/login"),e,r);case 5:o=t.sent,s=o.data,i=s.token,l=s.user,u=Object(c.a)(Object(c.a)({},l),{},{token:i}),a({type:"LOGIN_SUCCESS",payload:u}),localStorage.setItem("loggedInUser",JSON.stringify(u)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"LOGIN_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(s))}},r.a.createElement(f.a,{theme:D},r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,name:"email",type:"email",id:"email",disabled:w,autoComplete:"current-email",onChange:k,value:s.email,className:p.emailInput,InputProps:{className:p.emailInput,classes:{notchedOutline:p.InputBorder}}}),r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Password",required:!0,name:"password",type:"password",id:"password",disabled:w,autoComplete:"current-password",onChange:k,value:s.password,inputProps:{minLength:8},className:p.passwordInput,InputProps:{className:p.passwordInput,classes:{notchedOutline:p.InputBorder}}})),r.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary",className:p.loginBtn,fullWidth:!0,disabled:w,endIcon:w&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Login")),r.a.createElement(h.a,{className:p.notSignedUp},"Don't have email ?"," ",r.a.createElement(S.b,{className:p.signUpLink,to:"/signup"}," ","Signup")),r.a.createElement(h.a,{className:p.notSignedUp},r.a.createElement(S.b,{className:p.signUpLink,to:"/forgotPassword"},"Forgot password")," ","?"))))},P=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),B=a(260),F=Object(m.a)({palette:{primary:x.a}}),W=function(e){var t=e.history,a=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",passwordConfirm:""}),o=Object(l.a)(a,2),s=o[0],u=o[1],p=P(),d=Object(M.b)(),m=Object(M.c)((function(e){return e.loginUser})),x=m.loading,w=m.user,_=m.err,I=m.success;function N(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}var j=function(e){var t=e.target,a=t.name,n=t.value;u(Object(c.a)(Object(c.a)({},s),{},Object(i.a)({},a,n)))};return Object(n.useEffect)((function(){w&&w.token&&t.push("/home")}),[d,t,w]),r.a.createElement(r.a.Fragment,null,I?r.a.createElement(O.a,{open:I,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(N,{severity:"success"},"Signed up successfully")):"",x?r.a.createElement(O.a,{open:x,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(N,{severity:"info"},"Signing up")):"",_?r.a.createElement(O.a,{open:_&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(N,{severity:"error"},_)):"",r.a.createElement("div",{className:p.root},r.a.createElement(g.a,{maxWidth:"xs"},r.a.createElement(h.a,{className:p.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Signup",r.a.createElement("div",{className:p.loginLogo},r.a.createElement("img",{src:"images/login/loginLogo.png",alt:"Login Logo"}))),r.a.createElement("form",{className:p.loginFrom,onSubmit:function(e){e.preventDefault(),d(function(e){return function(){var t=Object(C.a)(R.a.mark((function t(a,n){var r,o,s,i,l,u;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SIGNUP_REQUEST"}),r={headers:{"Content-Type":"application/json"}},t.next=5,A.a.post("".concat(T,"/signup"),e,r);case 5:o=t.sent,s=o.data,i=s.token,l=s.user,u=Object(c.a)(Object(c.a)({},l),{},{token:i}),a({type:"SIGNUP_SUCCESS",payload:u}),localStorage.setItem("loggedInUser",JSON.stringify(u)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:"SIGNUP_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(s))}},r.a.createElement(f.a,{theme:F},r.a.createElement(B.a,{container:!0,spacing:2},r.a.createElement(B.a,{item:!0,sm:6,xs:12},r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"First Name",required:!0,name:"firstName",type:"text",id:"firstName",disabled:x,autoComplete:"first-name",onChange:j,value:s.firstName,className:p.emailInput,InputProps:{className:p.emailInput,classes:{notchedOutline:p.InputBorder}}})),r.a.createElement(B.a,{item:!0,sm:6,xs:12},r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Last Name",required:!0,name:"lastName",disabled:x,type:"text",id:"lastName",autoComplete:"last-name",onChange:j,value:s.lastName,className:p.emailInput,InputProps:{className:p.emailInput,classes:{notchedOutline:p.InputBorder}}}))),r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,disabled:x,name:"email",type:"email",id:"email",autoComplete:"current-email",onChange:j,value:s.email,className:p.emailInput,InputProps:{className:p.emailInput,classes:{notchedOutline:p.InputBorder}}}),r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Password",required:!0,name:"password",disabled:x,type:"password",id:"password",autoComplete:"current-password",onChange:j,value:s.password,inputProps:{minLength:8},className:p.passwordInput,InputProps:{className:p.passwordInput,classes:{notchedOutline:p.InputBorder}}}),r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Password Confirmation",required:!0,name:"passwordConfirm",disabled:x,type:"password",id:"passwordConfirm",autoComplete:"current-passwordConfirm",onChange:j,value:s.passwordConfirm,inputProps:{minLength:8},className:p.passwordInput,InputProps:{className:p.passwordInput,classes:{notchedOutline:p.InputBorder}}})),r.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary",className:p.loginBtn,fullWidth:!0,disabled:x,endIcon:x&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Signup")),r.a.createElement(h.a,{className:p.notSignedUp},"Have an account ?"," ",r.a.createElement(S.b,{className:p.signUpLink,to:"/login"}," ","Login")))))},z=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center",fontSize:"30px"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),G=Object(m.a)({palette:{primary:x.a}}),H=function(e){var t=e.history,a=Object(n.useState)(""),o=Object(l.a)(a,2),s=o[0],i=o[1],c=z(),u=Object(M.b)(),p=Object(M.c)((function(e){return e.loginUser})).user,d=Object(M.c)((function(e){return e.userForgotPassword})),m=d.loading,x=d.success,S=d.err;function w(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}return Object(n.useEffect)((function(){p&&p.token&&t.push("/home")}),[u,t,p]),r.a.createElement(r.a.Fragment,null,x?r.a.createElement(O.a,{open:x,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(w,{severity:"success"},"Please check you email for resetting password link ",r.a.createElement("br",null),"You can close this window now")):"",m?r.a.createElement(O.a,{open:m,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(w,{severity:"info"},"Sending your request")):"",S?r.a.createElement(O.a,{open:S&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(w,{severity:"error"},S)):"",r.a.createElement("div",{className:c.root},r.a.createElement(g.a,{maxWidth:"xs"},r.a.createElement(h.a,{className:c.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Enter your email"),r.a.createElement("form",{className:c.loginFrom,onSubmit:function(e){e.preventDefault(),u(function(e){return function(){var t=Object(C.a)(R.a.mark((function t(a,n){var r;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"FORGOT_PASSWORD_REQUEST"}),r={headers:{"Content-Type":"application/json"}},t.next=5,A.a.post("".concat(T,"/forgotPassword"),{email:e},r);case 5:a({type:"FORGOT_PASSWORD_SUCCESS"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"FORGOT_PASSWORD_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()}(s))}},r.a.createElement(f.a,{theme:G},r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,name:"email",type:"email",id:"email",disabled:m,autoComplete:"current-email",onChange:function(e){return i(e.target.value)},value:s,className:c.emailInput,InputProps:{className:c.emailInput,classes:{notchedOutline:c.InputBorder}}})),r.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary",className:c.loginBtn,fullWidth:!0,disabled:m,endIcon:m&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Send")))))},Q=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex",textAlign:"center",paddingTop:"30px"},emailInput:{fontWeight:"bold","& >.MuiInputLabel-outlined":{fontWeight:"bold"}},passwordInput:{"& >.MuiInputLabel-outlined":{fontWeight:"bold"}},InputBorder:{borderColor:"#019688"},loginBtn:{backgroundColor:"#019688",fontWeight:"bold",marginTop:"25px","&:hover":{backgroundColor:"#008276"}},notSignedUp:{paddingTop:"20px",textAlign:"center",fontWeight:"bold"},signUpLink:{textDecoration:"none",color:"#019688","&:hover":{textDecoration:"underline"}},lonInTopHeader:{display:"inline-flex",margin:"auto",alignItems:"center",justifyContent:"center",fontSize:"30px"},loginLogo:{textAlign:"center",display:"inline-block",width:"75px",height:"75px",margin:"auto","&>img":{width:"100%",height:"100%"}}}})),Y=Object(m.a)({palette:{primary:x.a}}),q=function(e){var t=e.history,a=e.match.params.token,o=Object(n.useState)({email:"",password:"",passwordConfirm:""}),s=Object(l.a)(o,2),u=s[0],p=s[1],d=Q(),m=Object(M.b)(),x=Object(M.c)((function(e){return e.loginUser})).user,S=Object(M.c)((function(e){return e.userResetPassword})),w=S.loading,_=S.success,I=S.err;function N(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}var j=function(e){var t=e.target,a=t.name,n=t.value;p(Object(c.a)(Object(c.a)({},u),{},Object(i.a)({},a,n)))};return Object(n.useEffect)((function(){x&&x.token&&t.push("/home")}),[m,t,x]),Object(n.useEffect)((function(){_&&setTimeout((function(){t.push("/login")}),2e3)}),[t,_]),r.a.createElement(r.a.Fragment,null,_?r.a.createElement(O.a,{open:_,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(N,{severity:"success"},"Password updated successfully")):"",w?r.a.createElement(O.a,{open:w,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(N,{severity:"info"},"Sending Your Request")):"",I?r.a.createElement(O.a,{open:I&&!0,autoHideDuration:1e3,anchorOrigin:{horizontal:"center",vertical:"top"}},r.a.createElement(N,{severity:"error"},I)):"",r.a.createElement("div",{className:d.root},r.a.createElement(g.a,{maxWidth:"xs"},r.a.createElement(h.a,{className:d.lonInTopHeader,style:{textAlign:"center"},variant:"h2"},"Reset your password password"),r.a.createElement("form",{className:d.loginFrom,onSubmit:function(e){e.preventDefault(),m(function(e,t){return function(){var a=Object(C.a)(R.a.mark((function a(n,r){var o;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"RESET_PASSWORD_REQUEST"}),o={headers:{"Content-Type":"application/json"}},a.next=5,A.a.post("".concat(T,"/resetPassword/").concat(e),t,o);case 5:n({type:"RESET_PASSWORD_SUCCESS"}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:"RESET_PASSWORD_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e,t){return a.apply(this,arguments)}}()}(a,u))}},r.a.createElement(f.a,{theme:Y},r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Email",required:!0,name:"email",type:"email",id:"email",disabled:w,autoComplete:"current-email",onChange:j,value:u.email,className:d.emailInput,InputProps:{className:d.emailInput,classes:{notchedOutline:d.InputBorder}}}),r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"New Password",required:!0,name:"password",type:"password",id:"password",disabled:w,autoComplete:"current-password",onChange:j,value:u.password,inputProps:{minLength:8},className:d.passwordInput,InputProps:{className:d.passwordInput,classes:{notchedOutline:d.InputBorder}}}),r.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"New Password Again",required:!0,name:"passwordConfirm",type:"password",id:"passwordConfirm",disabled:w,autoComplete:"current-password",onChange:j,value:u.passwordConfirm,inputProps:{minLength:8},className:d.passwordInput,InputProps:{className:d.passwordInput,classes:{notchedOutline:d.InputBorder}}})),r.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary",className:d.loginBtn,fullWidth:!0,disabled:w,endIcon:w&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Send")))))},J=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh",minWidth:"650px",background:"white",position:"relative",zIndex:"2",boxShadow:" -2px -2px 10px grey",display:"flex"}}})),K=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",overflow:"hidden",borderRight:"2px solid #E5E5E6",flex:"0.35"}}})),X=a(253),V=a(278),Z=a(139),$=a(265),ee=a(264),te=a(132),ae=a.n(te),ne=a(83),re=a.n(ne),oe=Object(u.a)((function(e){return{root:{padding:"10px 0",width:"100%",height:"59px",display:"flex",alignItems:"center",position:"relative",justifyContent:"space-between",backgroundColor:"#EDEDED",zIndex:"10"},text:{fontWeight:"bold",color:"#009688"},addChat:{border:"1px solid #009688",color:"#009688"},sidebarIcons:{"& *":{color:"#696969"}},menuItem:{fontWeight:"bold"}}})),se=Object(u.a)((function(e){return{root:{width:"90vw",height:"90vh"},addChatDialogBtn:{color:"white",backgroundColor:"#009688",fontWeight:"bold","&:hover":{backgroundColor:"rgba(0, 148, 133, 0.66)"}}}})),ie=a(277),ce=a(261),le=a(262),ue=a(263),pe=Object(u.a)((function(e){return{root:{margin:"0 auto",fontWeight:"bold"}}})),de=function(e){var t=e.severity,a=e.message,n=(e.children,pe());return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{className:n.root,severity:t||"info"},a))},me=function(e){return function(){var t=Object(C.a)(R.a.mark((function t(a,n){var r,o,s,i,c,l;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n().currentOpenRoom.currentOpenRoomId,o=n().currentOpenRoom.currentOpenRoom,e!==r||!o){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,s="Bearer ".concat(n().loginUser.user.token),i={headers:{"Content-Type":"application/json",authorization:s}},t.next=9,A.a.get("".concat(I,"/").concat(e),i);case 9:c=t.sent,l=c.data.data,a({type:"CURRENT_OPEN_ROOM_SUCCESS",payload:l}),localStorage.setItem("currentOpenRoomId",e),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),a({type:"CURRENT_OPEN_ROOM_REQUEST",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e,a){return t.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(C.a)(R.a.mark((function t(a){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"UPDATE_ROOM_PUT_UP",payload:e})}catch(n){a({type:"GET_MY_ROOMS_FAIL",payload:n.response&&n.response.data.message?n.response.data.message:n.message})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},he=function(e,t){return function(){var a=Object(C.a)(R.a.mark((function a(n,r){var o,s,i,c;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"HANDLE_BLOCK_ROOM_REQUEST"}),o="Bearer ".concat(r().loginUser.user.token),s={headers:{"Content-Type":"application/json",authorization:o}},a.next=6,A.a.post("".concat(j),{room:e,otherUser:t},s);case 6:i=a.sent,c=i.data.data,n({type:"HANDLE_BLOCK_ROOM_SUCCESS",payload:c}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"HANDLE_BLOCK_ROOM_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()},fe=function(e,t){return function(){var a=Object(C.a)(R.a.mark((function a(n,r){var o,s,i,c;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"HANDLE_UNBLOCK_ROOM_REQUEST"}),o="Bearer ".concat(r().loginUser.user.token),s={headers:{"Content-Type":"application/json",authorization:o}},a.next=6,A.a.post("".concat(j,"/deleteBlock"),{room:e,otherUser:t},s);case 6:i=a.sent,c=i.data.data,n({type:"HANDLE_UNBLOCK_ROOM_SUCCESS",payload:c}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"HANDLE_UNBLOCK_ROOM_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()},Ee=function(e){return function(){var t=Object(C.a)(R.a.mark((function t(a,n){var r,o,s,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n().currentOpenRoom.currentOpenRoom._id===e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=8,A.a.get("".concat(I,"/").concat(e),o);case 8:s=t.sent,i=s.data.data,a({type:"UPDATE_CURRENT_OPEN_ROOM",payload:i}),localStorage.setItem("currentRoom",JSON.stringify(i)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),a({type:"HANDLE_ACCEPT_ROOM_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e,a){return t.apply(this,arguments)}}()},be=Object(m.a)({palette:{primary:x.a}}),Oe=function(e){var t=e.open,a=e.setOpen,o=se(),s=Object(M.b)(),i=Object(n.useState)(""),c=Object(l.a)(i,2),u=c[0],p=c[1],d=Object(M.c)((function(e){return e.createRoom})),m=d.loading,g=d.success,h=d.err,O=function(){a(!1),p("")};return Object(n.useEffect)((function(){g&&p("")}),[g]),r.a.createElement(ie.a,{fullWidth:!0,maxWidth:"md",className:o.test,open:t,onClose:O,"aria-labelledby":"form-dialog-title"},m?r.a.createElement(de,{message:"Creating new chat ..."}):h?r.a.createElement(de,{severity:"error",message:h}):g?r.a.createElement(de,{severity:"success",message:"Room created successfully"}):r.a.createElement(ce.a,{id:"form-dialog-title"},"Enter Other Person Email"," "),r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),s((t="".concat(u).trim(),function(){var e=Object(C.a)(R.a.mark((function e(a,n){var r,o,s,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"CREATE_ROOM_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},e.next=6,A.a.post("".concat(I,"/createNewRoom"),{otherUserEmail:t},o);case 6:s=e.sent,i=s.data.data,a({type:"CREATE_ROOM_SUCCESS",payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:"CREATE_ROOM_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))}},r.a.createElement(le.a,null,r.a.createElement(f.a,{theme:be},r.a.createElement(E.a,{className:o.text,autoFocus:!0,margin:"dense",id:"email",label:"Email Address",type:"email",fullWidth:!0,onChange:function(e){return p(e.target.value)},value:u,disabled:m}))),r.a.createElement(ue.a,null,r.a.createElement(b.a,{className:o.addChatDialogBtn,onClick:O,variant:"contained"},"Cancel"),r.a.createElement(b.a,{className:o.addChatDialogBtn,disabled:u.length<1||m,variant:"contained",type:"submit",endIcon:m&&r.a.createElement(y.a,{style:{color:"black",width:"20px",height:"20px"}})},"Add Chat"))))},ve=function(){var e=oe(),t=Object(M.b)(),a=Object(n.useState)(!1),o=Object(l.a)(a,2),s=o[0],i=o[1],c=Object(M.c)((function(e){return e.loginUser})).user,u=function(){t((function(e,t){e({type:"LOGOUT_USER"}),e({type:"CURRENT_OPEN_ROOM_RESET3"}),localStorage.removeItem("loggedInUser"),localStorage.removeItem("currentRoom"),t().socket.disconnect()}))},p=r.a.useState(null),d=Object(l.a)(p,2),m=d[0],g=d[1],h=Boolean(m),f=function(){g(null)};return r.a.createElement("div",{className:e.root},r.a.createElement(X.a,null,r.a.createElement(V.a,{src:"".concat(c.photo)})),r.a.createElement("div",{className:e.sidebarIcons},r.a.createElement(Oe,{open:s,setOpen:i}),r.a.createElement(X.a,{onClick:function(){return i(!0)},className:e.addChat},r.a.createElement(ee.a,null)),r.a.createElement(X.a,null,r.a.createElement(ae.a,null)),r.a.createElement(X.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){g(e.currentTarget)}},r.a.createElement(re.a,null)),r.a.createElement("div",null,r.a.createElement(Z.a,{id:"long-menu",anchorEl:m,keepMounted:!0,open:h,onClose:f,PaperProps:{style:{maxHeight:216,width:"20ch"}}},r.a.createElement($.a,{onClick:function(){u(),f()},className:e.menuItem},"Logout")))))},ye=Object(u.a)((function(e){return{root:{height:"49px",width:"100%",backgroundColor:"#F6F6F6",padding:"10px",boxShadow:"0 1px 2px #ccc",borderBottom:"1px solid #bbb"},main:{background:"white",width:"100%",height:"100%",borderRadius:"20px",display:"flex",alignItems:"center",overflow:"hidden",padding:"2px 10px"},searchBox:{width:"100%",height:"100%",outline:"0",border:"none"},searchIcon:{color:"#919191",marginRight:"8px",fontSize:"20px"}}})),xe=a(84),Se=a.n(xe),we=function(){var e=ye();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.main},r.a.createElement(Se.a,{className:e.searchIcon}),r.a.createElement("input",{placeholder:"Search chats...",className:e.searchBox,type:"text"})))},Re=Object(u.a)((function(e){return{root:{flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"}}}})),Ce=Object(u.a)((function(e){return{btnBase:{padding:0,margin:0,width:"100%",height:"72px"},root:{width:"100%",height:"72px",display:"flex",alignItems:"center",cursor:"pointer",borderBottom:"1px solid #F5F5F5","&:hover":{background:"#F5F5F5"},overflow:"hidden"},avatarContainer:{padding:"0 10px"},info:{flex:1,padding:"15px 10px",display:"flex",flexDirection:"column"},infoTop:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"7px",width:"100%"},name:{flex:"0.60",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"100%",fontWeight:"bold",fontFamily:"Noto Sans JP, sans-serif",textAlign:"left",height:"100%"},date:{flex:"0.40",fontSize:"12px",color:"#878787",fontWeight:"bold",height:"100%"},lastMsg:{width:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Noto Sans JP, sans-serif",color:"#626262",fontSize:"90%",textAlign:"left"},newChat:{color:"#009688",fontWeight:"bold"}}})),_e=a(100),Te=a(45),Ie=a.n(Te),Ne=function(e){var t=e.room,a=Ce(),n=Object(M.b)();return r.a.createElement(_e.a,{onClick:function(){n({type:"CURRENT_USER_STATUS"}),n(me(t._id))},className:a.btnBase},r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.avatarContainer},r.a.createElement(V.a,{src:t.userToShowOnRoom.photo})),r.a.createElement("div",{className:a.info},r.a.createElement("div",{className:a.infoTop},r.a.createElement("div",{className:a.name},"".concat(t.userToShowOnRoom.firstName," ").concat(t.userToShowOnRoom.lastName)),r.a.createElement("div",{className:a.date},Ie()(t.lastMessage.createdAt).format("hh:mm A"))),r.a.createElement("div",{className:a.lastMsg},t.new?r.a.createElement("span",{className:a.newChat},"New"):r.a.createElement("span",null,t.lastMessage.messageTXT)))))},je=function(){var e=Re(),t=Object(M.b)(),a=Object(M.c)((function(e){return e.myRooms})),o=a.loading,s=void 0===o||o,i=a.rooms,c=a.err;return Object(n.useEffect)((function(){t(function(){var e=Object(C.a)(R.a.mark((function e(t,a){var n,r,o,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GET_MY_ROOMS_REQUEST"}),n="Bearer ".concat(a().loginUser.user.token),r={headers:{authorization:n}},e.next=6,A.a.get("".concat(I,"/getMyRooms"),r);case 6:o=e.sent,s=o.data.data,t({type:"GET_MY_ROOMS_SUCCESS",payload:s}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:"GET_MY_ROOMS_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.root},s?r.a.createElement(de,{message:"Loading Chats ..."}):c?r.a.createElement(de,{severity:"error",message:c}):i.length<1?r.a.createElement(de,{message:"You don't have chats yet \ud83d\ude0a"}):i.map((function(e){return r.a.createElement(Ne,{key:e._id,room:e})}))))},ke=function(){var e=K();return r.a.createElement("div",{className:e.root},r.a.createElement(ve,null),r.a.createElement(we,null),r.a.createElement(je,null))},Ae=Object(u.a)((function(e){return{root:{background:"#F8F9FA",height:"100%",overflow:"hidden",flex:"0.65"}}})),Ue=Object(u.a)((function(e){return{root:{width:"100%",height:"100%",backgroundColor:"#F8F9FA",borderBottom:"10px solid #4ADF83",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},mainLogo:{width:"250px",height:"250px"},mainText:{marginTop:"28px",fontSize:"32px",color:"#525252",fontWeight:"300",fontFamily:"Noto Sans JP, sans-serif",textAlign:"center",padding:"0 20px"},subTitle:{fontSize:"14px",color:"#888989",fontFamily:"Noto Sans JP, sans-serif",textAlign:"center",lineHeight:"20px",marginTop:"25px",padding:"0 50px"},contactMe:{marginTop:"20px",fontSize:"20px",color:"#525252",fontWeight:"300",fontFamily:"Noto Sans JP, sans-serif",textAlign:"center",padding:"0 20px","&>a":{color:"#009688",fontWeight:"bold"}}}})),Me=function(){var e=Ue();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{className:e.mainLogo,src:"https://web.whatsapp.com/img/intro-connection-light_c98cc75f2aa905314d74375a975d2cf2.jpg",alt:"main logo"}),r.a.createElement("h1",{className:e.mainText},"Welcome to WhatsApp Clone"),r.a.createElement("div",{className:e.subTitle},"This is a testing WhatsApp version, not for profiting purposes. ",r.a.createElement("br",null)),r.a.createElement("h1",{className:e.contactMe},"Fully programmed by Amr Mohammed Hassan"," ",r.a.createElement(S.b,{to:"/contactAmr"},"Contact Me")))},De=Object(u.a)((function(e){return{root:{display:"flex",height:"100%",flexDirection:"column",backgroundColor:"#E5DDD5",position:"relative"},bgObjects:{backgroundImage:'url("https://web.whatsapp.com/img/bg-chat-tile-light_04fcacde539c58cca6745483d4858c52.png")',backgroundSize:"contain",backgroundColor:"#E5DDD5",backgroundPosition:"fixed",position:"absolute",zIndex:"0",top:"0",left:"0",width:"100%",height:"100%",opacity:"0.1"},acceptChat:{width:"100%",textAlign:"center",padding:"10px 15px","&>button":{fontWeight:"bold"}}}})),Le=a(266),Pe=Object(u.a)((function(e){return{root:{padding:"10px 0",width:"100%",height:"59px",display:"flex",alignItems:"center",position:"relative",justifyContent:"space-between",backgroundColor:"#EDEDED",boxShadow:"0 1px 2px #ccc",zIndex:"10"},sidebarIcons:{},userInfoBtnBase:{},userInfo:{display:"flex",alignItems:"center",padding:"10px"},avatarContainer:{marginRight:"10px"},info:{textAlign:"lef",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},name:{width:"100px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"100%",fontWeight:"bold",fontFamily:"Noto Sans JP, sans-serif",textAlign:"left"},status:{width:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Noto Sans JP, sans-serif",color:"#626262",fontSize:"90%",textAlign:"left"}}})),Be=function(e){var t=e.currentOpenRoom,a=Pe(),o=Object(M.b)(),s=Object(n.useState)(!1),i=Object(l.a)(s,2),c=i[0],u=i[1],p=Object(M.c)((function(e){return e.currentChattingUserStatus})),d=p.status,m=function(){u(!1)},g=function(){var e;o((e=t._id,function(){var t=Object(C.a)(R.a.mark((function t(a,n){var r,o,s,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"DELETE_ROOM_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,A.a.delete("".concat(I,"/").concat(e),o);case 6:s=t.sent,i=s.data.data,a({type:"DELETE_ROOM_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"DELETE_ROOM_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))},h=r.a.useState(null),f=Object(l.a)(h,2),E=f[0],O=f[1],v=Boolean(E),y=function(){O(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.root},r.a.createElement(_e.a,{className:a.userInfoBtnBase},r.a.createElement("div",{className:a.userInfo},r.a.createElement("div",{className:a.avatarContainer},r.a.createElement(V.a,{src:t.userToShowOnRoom.photo})),r.a.createElement("div",{className:a.info},r.a.createElement("div",{className:a.name},"".concat(t.userToShowOnRoom.firstName," ").concat(t.userToShowOnRoom.lastName)),r.a.createElement("div",{className:a.status},d?"startTyping"===d?"Typing ...":"online"===d?"Online":"offline"===d?"Last seen at ".concat(Ie()(p.lastSeenAt).format("hh:mm A")):"stopTyping"===d?"Online":"":"",d?"":t.userToShowOnRoom.onlineId?"Online":t.userToShowOnRoom.lastSeenAt?"Last seen at ".concat(Ie()(t.userToShowOnRoom.lastSeenAt).format("hh:mm A")):"")))),r.a.createElement("div",{className:a.sidebarIcons},r.a.createElement(X.a,null,r.a.createElement(Se.a,null)),r.a.createElement(X.a,{onClick:function(e){O(e.currentTarget)}},r.a.createElement(re.a,null)),r.a.createElement("div",null,r.a.createElement(Z.a,{id:"long-menu",anchorEl:E,keepMounted:!0,open:v,onClose:y,PaperProps:{style:{maxHeight:216,width:"20ch"}}},r.a.createElement($.a,{onClick:function(){u(!0),y()},className:a.menuItem},"Delete Chat"),r.a.createElement($.a,{onClick:t.myBlock?function(){o(fe(t._id,t.userToShowOnRoom._id)),y()}:function(){o(he(t._id,t.userToShowOnRoom._id)),y()},className:a.menuItem},t.myBlock?"Unblock":"Block"))),r.a.createElement(ie.a,{open:c,keepMounted:!0,onClose:m,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(ce.a,{id:"alert-dialog-slide-title"},"Delete Chat with"," ",t.userToShowOnRoom.firstName+" "+t.userToShowOnRoom.lastName),r.a.createElement(le.a,null,r.a.createElement(Le.a,{id:"alert-dialog-slide-description"},"Are you sure you want to deleted this chat.",r.a.createElement(b.a,{variant:"text",color:"secondary"},"Block"),"Instead?")),r.a.createElement(ue.a,null,r.a.createElement(b.a,{onClick:m,color:"primary"},"No"),r.a.createElement(b.a,{onClick:function(){g(),m()},color:"secondary"},"Yes"))))))},Fe=Object(u.a)((function(e){return{root:{flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-thumb":{background:"#CCCCCC",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#aaa"},position:"relative",zIndex:10},earlierMessagesBtn:{position:"absolute",right:"10px",bottom:"70px",zIndex:"1000",backgroundColor:"white",borderRadius:"50%",boxShadow:"0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2);"}}})),We=Object(u.a)((function(e){return{root:{width:"100%",padding:"10px 8%",position:"relative","&>div":{maxWidth:"90%"}},otherMessage:{background:"white",padding:"6px 7px 8px 9px",display:"inline-block",borderRadius:"0 10px 10px 10px ",position:"relative",boxShadow:"0 1px .5px rgba(0, 0, 0,.13)"},otherMessageText:{padding:"15px 0"},otherMessageDate:{textAlign:"right",fontSize:"11px",color:"#8C8C8C"},myMessage:{background:"#DCF8C6",padding:"6px 7px 8px 9px",display:"inline-block",borderRadius:"10px 0 10px 10px ",position:"relative",boxShadow:"0 1px .5px rgba(0, 0, 0,.13)"},myMessageText:{padding:"15px 0"},myMessageDate:{textAlign:"right",fontSize:"11px",color:"#8C8C8C"},msgStatus:{paddingLeft:"5px","& > img":{width:"15px",height:"auto"}},adminMessage:{display:"inline-block",backgroundColor:"#E3F6FE",boxShadow:"0 1px .5px rgba(0, 0,0,.13)",padding:"10px 12px",borderRadius:"10px",textTransform:"uppercase",color:"#1D1E1F",fontSize:"12.5px",fontFamily:"'Roboto Condensed', sans-serif ",fontWeight:"bold",userSelect:"none"}}})),ze=function(e){var t=e.message,a=e.sender,o=We(),s=Object(n.useState)(""),i=Object(l.a)(s,2),c=i[0],u=i[1];return Object(n.useEffect)((function(){u(t.createdAt)}),[t.createdAt]),r.a.createElement("div",{className:o.root,style:"other"===a?{textAlign:"left"}:"admin"===a?{textAlign:"center"}:{textAlign:"right"}},"other"===a&&r.a.createElement("div",{className:o.otherMessage+" otherMessage"},r.a.createElement("div",{className:o.otherMessageText},t.messageTXT),r.a.createElement("div",{className:o.otherMessageDate},Ie()(c).format("hh:mm A"))),"me"===a&&r.a.createElement("div",{className:o.myMessage+" myMessage"},r.a.createElement("div",{className:o.myMessageText},t.messageTXT),r.a.createElement("div",{className:o.myMessageDate},Ie()(c).format("hh:mm A"),r.a.createElement("span",{className:o.msgStatus},r.a.createElement("img",{src:"sent"===t.status?"images/message_status/sent.png":"delivered"===t.status?"images/message_status/delivered.png":"images/message_status/read.png",alt:"read"})))),"admin"===a&&r.a.createElement("div",{className:o.adminMessage+" adminMessage"},r.a.createElement("div",{className:o.adminMessageText},t.messageTXT)))},Ge=a(133),He=a.n(Ge),Qe=function(e){var t=e.displayedMessages,a=e.user,o=Fe(),s=function(){document.getElementById("messages-container").scrollTo(0,document.getElementById("messages-container").scrollHeight)};return Object(n.useEffect)((function(){var e=document.getElementById("messages-container");(0===e.scrollTop||e.scrollHeight-(e.scrollTop+e.clientHeight)<300)&&s()}),[t]),Object(n.useEffect)((function(){var e=document.getElementById("messages-container"),t=document.getElementById("down-arrow");e.onscroll=function(){e.scrollHeight-(e.scrollTop+e.clientHeight)<300?t.style.display="none":t.style.display="inline-flex"}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"messages-container",className:o.root},t.map((function(e){return r.a.createElement(ze,{key:Math.random(),message:e,sender:e.sender===a._id?"me":"admin"===e.sender?"admin":"other"})}))),r.a.createElement("div",{className:o.earlierMessagesBtn},r.a.createElement(X.a,{onClick:s,style:{width:"40px",height:"40px",display:"none"},id:"down-arrow"},r.a.createElement(He.a,{style:{fontSize:"25px"}}))))},Ye=a(267),qe=Object(u.a)((function(e){return{root:{width:"100%",minHeight:"62px",backgroundColor:"#F0F0F0",position:"relative",zIndex:"10",display:"flex",alignItems:"center"},msgBox:{flex:1,height:"100%",padding:"10px 20px",paddingRight:"0"},msgInput:{width:"100%",height:"100%",outline:"none",border:"none",padding:"10px 15px",borderRadius:"20px",fontSize:"15px",color:"#4A4A4A",fontFamily:"'Roboto', sans-serif",fontWeight:"bold",maxHeight:"200px",resize:"none",overflow:"hidden",userSelect:"none"},send:{color:"#9B9B9B"}}})),Je=function(e){var t=e.currentOpenRoom,a=e.user,o=qe(),s=Object(M.b)(),i=Object(n.useState)(""),c=Object(l.a)(i,2),u=c[0],p=c[1],d=Object(n.useState)(!1),m=Object(l.a)(d,2),g=m[0],h=m[1],f=Object(M.c)((function(e){return e.socket})),E=Object(M.c)((function(e){return e.currentChattingUserStatus})),b=E.status;return Object(n.useEffect)((function(){u.trim()?h(!0):h(!1)}),[u]),Object(n.useEffect)((function(){var e;e=b?"online"===b?E.onlineId:E.typingUserOnlineId:t.userToShowOnRoom.onlineId,t.userToShowOnRoom.onlineId&&f.id&&(g?f.emit("user-currently-typing",{typingUserId:a._id,onlineUserId:e,typingUserOnlineId:f.id}):f.emit("user-stopped-typing",{typingUserId:a._id,onlineUserId:e,typingUserOnlineId:f.id}))}),[t,f,b,g,a,E.onlineId]),r.a.createElement("form",{className:o.root,onSubmit:function(e){if(e.preventDefault(),u){var a={room:t._id,receiver:t.userToShowOnRoom._id,messageTXT:u};s(function(e){return function(){var t=Object(C.a)(R.a.mark((function t(a,n){var r,o,s,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CREATE_MESSAGE_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,A.a.post("".concat(N,"/createMessage"),e,o);case 6:s=t.sent,i=s.data.data,a({type:"CREATE_MESSAGE_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"CREATE_MESSAGE_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(a)),h(!1),p("")}}},r.a.createElement("div",{className:o.msgBox},r.a.createElement("input",{autoFocus:!0,placeholder:"Type a message",type:"text",className:o.msgInput,rows:"1",value:u,onChange:function(e){p(e.target.value)}})),r.a.createElement("div",{className:o.send},r.a.createElement(X.a,{disabled:!u&&!0,type:"submit"},r.a.createElement(Ye.a,{style:{color:"#9B9B9B"}}))))},Ke=Object(u.a)((function(e){return{root:{flex:1}}})),Xe=function(e){var t=e.message,a=e.severity,n=e.children,o=Ke();return r.a.createElement("div",{className:o.root},r.a.createElement(de,{message:t,severity:a}),n)},Ve=Object(u.a)((function(e){return{root:{width:"100%",height:"100px",position:"relative",zIndex:"10",textAlign:"center","&>button":{marginTop:"10px",fontWeight:"bold"}}}})),Ze=function(e){var t=e.message,a=e.onAccept,n=e.onBlock,o=Ve();return r.a.createElement("div",{className:o.root},r.a.createElement(de,{message:t}),r.a.createElement(b.a,{style:{marginRight:"10px"},variant:"outlined",margin:"normal",onClick:a},"Accept"),r.a.createElement(b.a,{variant:"outlined",margin:"normal",onClick:n},"Block"))},$e=Object(u.a)((function(e){return{root:{width:"100%",position:"relative",zIndex:"10",textAlign:"center","&>button":{marginTop:"10px",fontWeight:"bold"}}}})),et=function(e){var t=e.severity,a=e.message,n=e.onUnBlock,o=$e();return r.a.createElement("div",{className:o.root},r.a.createElement(de,{severity:t,message:a}),n&&r.a.createElement(b.a,{style:{marginRight:"10px"},variant:"outlined",margin:"normal",onClick:n},"UnBlock"))},tt=function(e){var t=e.currentOpenRoom,a=e.currentOpenRoomId,o=De(),s=Object(M.b)(),i=Object(M.c)((function(e){return e.roomMessages})),c=i.loading,l=void 0===c||c,u=i.messages,p=i.err,d=Object(M.c)((function(e){return e.loginUser})).user;Object(n.useEffect)((function(){var e;s((e=a,function(){var t=Object(C.a)(R.a.mark((function t(a,n){var r,o,s,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"GET_ROOM_MESSAGES_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{authorization:r}},t.next=6,A.a.get("".concat(N,"/getRoomMessages/").concat(e),o);case 6:s=t.sent,i=s.data.data,a({type:"GET_ROOM_MESSAGES_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"GET_ROOM_MESSAGES_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[a,s]);return r.a.createElement("div",{className:o.root},a&&r.a.createElement(Be,{currentOpenRoom:t}),t.myBlock||t.otherUserBlock?null:a&&!t.accepted?t.otherUser===d._id?r.a.createElement(Ze,{onAccept:function(){var e;s((e=a,function(){var t=Object(C.a)(R.a.mark((function t(a,n){var r,o,s,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"HANDLE_ACCEPT_ROOM_REQUEST"}),r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},t.next=6,A.a.post("".concat(I,"/acceptRoom"),{room:e},o);case 6:s=t.sent,i=s.data.data,a({type:"HANDLE_ACCEPT_ROOM_SUCCESS",payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"HANDLE_ACCEPT_ROOM_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))},onBlock:function(){s(he(a,t.userToShowOnRoom._id))},message:"".concat(t.userToShowOnRoom.firstName," wants to chat you")}):r.a.createElement(Xe,{message:"Wait until ".concat(t.userToShowOnRoom.firstName," accept your request")}):null,t.myBlock?r.a.createElement(et,{message:"You blocked ".concat(t.userToShowOnRoom.fullName),onUnBlock:function(){s(fe(a,t.userToShowOnRoom._id))}}):t.otherUserBlock?r.a.createElement(et,{message:"You are blocked from ".concat(t.userToShowOnRoom.fullName),severity:"error"}):null,t.accepted?l?r.a.createElement(Xe,{message:"Getting messages ..."}):p?r.a.createElement(Xe,{severity:"error",message:p}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe,{user:d,displayedMessages:u})):null,a&&t.accepted&&!t.myBlock&&!t.otherUserBlock&&r.a.createElement(Je,{currentOpenRoom:t,user:d}),r.a.createElement("div",{className:o.bgObjects}))},at=function(){var e=Object(M.b)(),t=Object(M.c)((function(e){return e.currentOpenRoom})),a=t.currentOpenRoomId,o=t.currentOpenRoom,s=void 0===o?{}:o;Object(n.useEffect)((function(){a&&!s._id&&e(me(a))}),[s,a,e]);var i=Ae();return r.a.createElement("div",{className:i.root},a&&s._id?r.a.createElement(tt,{currentOpenRoomId:a,currentOpenRoom:s}):r.a.createElement(Me,null))},nt=a(134),rt=a.n(nt),ot=function(e){var t=e.history,a=J(),o=Object(M.b)(),s=Object(M.c)((function(e){return e.loginUser})).user,i=Object(M.c)((function(e){return e.socket}));return Object(n.useEffect)((function(){s&&s.token?o((function(e,t){var a=t().loginUser.user;e({type:"CREATE_SOCKET",payload:rt.a.connect(_,{query:{id:a._id}})})})):t.replace("/login")}),[o,t,s]),Object(n.useEffect)((function(){i.on&&(i.on("server--user-send-message",(function(e){var t,a;o((t=e.room,function(){var e=Object(C.a)(R.a.mark((function e(a,n){var r,o,s,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="Bearer ".concat(n().loginUser.user.token),o={headers:{"Content-Type":"application/json",authorization:r}},e.next=5,A.a.get("".concat(I,"/").concat(t),o);case 5:s=e.sent,i=s.data.data,a({type:"UPDATE_ROOM_PUT_UP",payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"HANDLE_ACCEPT_ROOM_FAIL",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}())),o((a=e,function(){var e=Object(C.a)(R.a.mark((function e(t,n){var r,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().currentOpenRoom.currentOpenRoomId,o=a.room,r===o&&t({type:"UPDATE_DISPLAYED_MESSAGES",payload:a});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))})),i.on("server--user-added-new-room",(function(e){o(ge(e)),o({type:"CREATE_ROOM_RESET"})})),i.on("server--user-accept-new-room",(function(e){o(ge(e)),o(Ee(e._id))})),i.on("server--user-delete-chat",(function(e){o(function(e){return function(t,a){a().currentOpenRoom.currentOpenRoom._id===e&&(localStorage.removeItem("currentRoom"),t({type:"CURRENT_OPEN_ROOM_RESET3",payload:e})),t({type:"UPDATE_ROOMS_AFTER_DELETING",payload:e})}}(e))})),i.on("server--user-block-room",(function(e){o(Ee(e.room))})),i.on("server--user-unblock-room",(function(e){o(Ee(e.room))})),i.on("server--user-online",(function(e){var t=e.userId,a=e.onlineId;o(U({status:"online",userId:t,onlineId:a}))})),i.on("server--user-offline",(function(e){var t=e.userId,a=e.lastSeenAt;o(U({status:"offline",userId:t,lastSeenAt:a}))})),i.on("server--user-currently-typing",(function(e){var t=e.userId,a=e.typingUserOnlineId;o(U({status:"startTyping",userId:t,typing:!0,typingUserOnlineId:a}))})),i.on("server--user-stopped-typing",(function(e){var t=e.userId,a=e.typingUserOnlineId;o(U({status:"stopTyping",userId:t,typing:!1,typingUserOnlineId:a}))})))}),[o,i]),s&&s.token?r.a.createElement("div",{className:a.root},r.a.createElement(ke,null),r.a.createElement(at,null)):null},st=a(271),it=a(216),ct=a(257),lt=a(272),ut=a(269),pt=a(270),dt=a(135),mt=a.n(dt),gt=a(268),ht=Object(u.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),ft=r.a.forwardRef((function(e,t){return r.a.createElement(gt.a,Object.assign({direction:"up",ref:t},e))}));function Et(){var e=ht(),t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],s=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){o(!0)}},"Open full-screen dialog"),r.a.createElement(ie.a,{fullScreen:!0,open:n,onClose:s,TransitionComponent:ft},r.a.createElement(ut.a,{className:e.appBar},r.a.createElement(pt.a,null,r.a.createElement(X.a,{edge:"start",color:"inherit",onClick:s,"aria-label":"close"},r.a.createElement(mt.a,null)),r.a.createElement(h.a,{variant:"h6",className:e.title},"Sound"),r.a.createElement(b.a,{autoFocus:!0,color:"inherit",onClick:s},"save"))),r.a.createElement(ct.a,null,r.a.createElement(it.a,{button:!0},r.a.createElement(st.a,{primary:"Phone ringtone",secondary:"Titania"})),r.a.createElement(lt.a,null),r.a.createElement(it.a,{button:!0},r.a.createElement(st.a,{primary:"Default notification ringtone",secondary:"Tethys"})))))}var bt=a(18),Ot=function(){return r.a.createElement(S.a,null,r.a.createElement(bt.a,{path:"/login",component:L}),r.a.createElement(bt.a,{path:"/signup",component:W}),r.a.createElement(bt.a,{path:"/home",component:ot}),r.a.createElement(bt.a,{path:"/forgotPassword",component:H}),r.a.createElement(bt.a,{path:"/resetPassword/:token",component:q}),r.a.createElement(bt.a,{path:"/test",component:Et}),r.a.createElement(bt.a,{path:"/",component:ot,exact:!0}))},vt=a(50),yt=a(136),xt=a(137),St=a(65),wt=Object(vt.combineReducers)({loginUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return{loading:!0};case"LOGIN_SUCCESS":return{loading:!1,user:t.payload,success:!0};case"LOGIN_FAIL":return{loading:!1,err:t.payload};case"SIGNUP_REQUEST":return{loading:!0};case"SIGNUP_SUCCESS":return{loading:!1,user:t.payload,success:!0};case"SIGNUP_FAIL":return{loading:!1,err:t.payload};case"LOGOUT_USER":return{};default:return e}},myRooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rooms:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MY_ROOMS_REQUEST":return{loading:!0};case"GET_MY_ROOMS_SUCCESS":return{loading:!1,rooms:t.payload};case"GET_MY_ROOMS_FAIL":return{loading:!1,err:t.payload};case"UPDATE_ROOM_PUT_UP":var a=t.payload._id,n=Object(St.a)(e.rooms).filter((function(e){return e._id!==a}));return n.unshift(t.payload),Object(c.a)(Object(c.a)({},e),{},{rooms:n});case"UPDATE_ROOMS_AFTER_DELETING":var r=t.payload,o=Object(St.a)(e.rooms).filter((function(e){return e._id!==r}));return Object(c.a)(Object(c.a)({},e),{},{rooms:o});default:return e}},createRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ROOM_REQUEST":return{loading:!0};case"CREATE_ROOM_SUCCESS":return{loading:!1,room:t.payload,success:!0};case"CREATE_ROOM_FAIL":return{loading:!1,err:t.payload};case"CREATE_ROOM_RESET":return{};default:return e}},currentOpenRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentOpenRoomId:"",currentOpenRoom:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_OPEN_ROOM_REQUEST":return{loading:!0};case"CURRENT_OPEN_ROOM_SUCCESS":return{currentOpenRoom:t.payload,loading:!1,success:!0,currentOpenRoomId:t.payload._id};case"CURRENT_OPEN_ROOM_REQUEST":return{loading:!1,err:t.payload};case"CURRENT_OPEN_ROOM_RESET3":return{};case"UPDATE_CURRENT_OPEN_ROOM":return Object(c.a)(Object(c.a)({},e),{},{currentOpenRoom:t.payload});case"TYPING_MESSAGE":return Object(c.a)(Object(c.a)({},e),{},{typing:t.payload});default:return e}},roomMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ROOM_MESSAGES_REQUEST":return{loading:!0};case"GET_ROOM_MESSAGES_SUCCESS":return{loading:!1,messages:t.payload};case"GET_ROOM_MESSAGES_FAIL":return{loading:!1,err:t.payload};case"UPDATE_DISPLAYED_MESSAGES":var a=Object(St.a)(e.messages);return a.push(t.payload),Object(c.a)(Object(c.a)({},e),{},{messages:a});default:return e}},createMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MESSAGE_REQUEST":return{loading:!0};case"CREATE_MESSAGE_SUCCESS":return{loading:!1,message:t.payload,success:!0};case"CREATE_MESSAGE_FAIL":return{loading:!1,err:t.payload};case"CREATE_MESSAGE_RESET":return{};default:return e}},socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_SOCKET":return t.payload;case"DISCONNECT_SOCKET":return{};default:return e}},userForgotPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT_PASSWORD_REQUEST":return{loading:!0};case"FORGOT_PASSWORD_SUCCESS":return{loading:!1,success:!0};case"FORGOT_PASSWORD_FAIL":return{loading:!1,err:t.payload};default:return e}},userResetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_PASSWORD_REQUEST":return{loading:!0};case"RESET_PASSWORD_SUCCESS":return{loading:!1,success:!0};case"RESET_PASSWORD_FAIL":return{loading:!1,err:t.payload};default:return e}},currentChattingUserStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_USER_STATUS":return Object(c.a)({},t.payload);case"CURRENT_USER_STATUS_RESET":return{};default:return e}}}),Rt={loginUser:{user:localStorage.getItem("loggedInUser")?JSON.parse(localStorage.getItem("loggedInUser")):{}},currentOpenRoom:{currentOpenRoomId:localStorage.getItem("currentOpenRoomId")||"",currentOpenRoomData:{}}},Ct=[yt.a],_t=Object(vt.createStore)(wt,Rt,Object(xt.composeWithDevTools)(vt.applyMiddleware.apply(void 0,Ct)));a(213);s.a.render(r.a.createElement(M.a,{store:_t},r.a.createElement(Ot,null)),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.2fc5b1f7.chunk.js.map